用例ID,模块,子场景,业务描述,输入,输入JSON,tools工具,输出JSON,展示JSON,展示字段/指标,校验点,,,,,,,,,,
INT-004,意图识别,调拨计划意图识别,周一发起、标准输入,帮我生成本周的调拨计划,,,"解析结果JSON: {""intent"": ""调拨计划"", ""time_window"": ""this_week"", ""version"": ""weekly_baseline""}",,,"[MUST] 意图=生成调拨计划
[MUST] 时间窗=本周（自然周 周一~周日）
[SHOULD] 粒度=SKU×仓
[SHOULD] 版本=周基准版（weekly_baseline）",,,,,,,,,,
INT-005,意图识别,调拨计划意图识别,每日巡检，标准输入,今天的调拨计划是什么？,,,"解析结果JSON: {""intent"": ""调拨计划"", ""time_window"": ""today"", ""version"": ""daily_refresh""}",,,"[MUST] 意图=生成调拨计划
[MUST] 时间窗=今天（today）
[SHOULD] 版本=日更版（daily_refresh）",,,,,,,,,,
INT-001,意图识别,调拨计划意图识别,单仓+单SKU,请帮我生成本周成都仓 A001 的调拨计划,,,"解析结果JSON: {""intent"": ""调拨计划"", ""warehouse"": ""成都仓"", ""sku"": ""A001"", ""time_window"": ""本周"", ""granularity"": ""SKU×仓""}",,,"1) [MUST] 识别意图=调拨计划
2) [MUST] 抽取仓=成都仓
3) [MUST] 抽取SKU=A001
4) [MUST] 时间窗解析=2025-07-01~2025-07-31",,,,,,,,,,
INT-015,意图识别,调拨计划意图识别,多SKU,只做 A001 和 A002 本周的调拨计划,,,"解析结果JSON: {""intent"": ""调拨计划"", ""sku_list"": [""A001"", ""A002""], ""time_window"": ""this_week""}",,,"[MUST] 意图=生成调拨计划
[MUST] SKU集合={A001, A002}
[MUST] 时间窗=本周（this_week）",,,,,,,,,,
INT-008,意图识别,调拨计划意图识别,单仓,生成本周北京仓的调拨计划,,,"解析结果JSON: {""intent"": ""调拨计划"", ""warehouse"": ""北京仓"", ""stop_allocation_policy"": ""apply""}",,,"[MUST] 意图=生成调拨计划
[MUST] 仓=北京仓
[MUST] 止拨策略=应用（默认）",,,,,,,,,,
INT-011,意图识别,调拨计划意图识别,多仓,给 北京/成都 两仓做本周调拨,,,"解析结果JSON: {""intent"": ""调拨计划"", ""warehouse_list"": [""北京仓"", ""成都仓""], ""time_window"": ""本周""}",,,"[MUST] 意图=生成调拨计划
[MUST] 仓集合={北京仓, 成都仓}
[MUST] 时间窗=下周（next_week）",,,,,,,,,,
INT-009,意图识别,调拨计划意图识别,单仓+止拨,放开止拨，生成本周北京仓调拨计划,,,"解析结果JSON: {""intent"": ""调拨计划"", ""warehouse"": ""北京仓"", ""stop_allocation_policy"": ""override""}",,,"[MUST] 意图=生成调拨计划
[MUST] 仓=北京仓
[MUST] 止拨策略=越权（override）",,,,,,,,,,
INT-012,意图识别,调拨计划意图识别,标准输入+不含在途,生成本周计划，不要把在途算进去,,,"解析结果JSON: {""intent"": ""调拨计划"", ""time_window"": ""this_week"", ""include_in_transit"": false}",,,"[MUST] 意图=生成调拨计划
[MUST] 时间窗=本周（this_week）
[MUST] 包含在途=否（false）",,,,,,,,,,
INT-013,意图识别,调拨计划意图识别,单批次最多去向数,生成本周调拨计划，每个批次最多拆到两个去向,,,"解析结果JSON: {""intent"": ""调拨计划"", ""max_destinations_per_batch"": 2}",,,"[MUST] 意图=生成调拨计划
[MUST] K限制=2（单批次最多去向数）",,,,,,,,,,
INT-014,意图识别,调拨计划意图识别,去向的最小拆分箱数,生成本周调拨计划，每个批次拆批时，至少3箱,,,"解析结果JSON: {""intent"": ""调拨计划"", ""min_split_cases"": 3}",,,"[MUST] 意图=生成调拨计划
[MUST] 最小拆分量=3箱",,,,,,,,,,
INT-017,意图识别,预测对比报告意图识别,单SKU+单仓+时间+算法,做 A001，北京仓 近三个月 MA/ETS/Croston 的预测对比，给 WMAPE,,,"解析结果JSON: {""intent"": ""预测对比报告"", ""sku"": ""A001"", ""warehouse"": ""北京仓"", ""time_window"": ""近3个月"", ""algorithms"": [""MA"", ""ETS"", ""Croston""], ""metric"": ""WMAPE""}",,,"[MUST] 意图=预测对比报告
[MUST] SKU=A001
[MUST] 仓=北京仓
[MUST] 时间窗=近3个月
[MUST] 算法集合={MA, ETS, Croston}
[MUST] 指标=WMAPE",,,,,,,,,,
INT-021,意图识别,预测对比报告意图识别,单SKU+单仓+时间,生成 **2025-07 成都仓 A002** 的算法对比，**按 wMAPE 排序**,,,"解析结果JSON: {""intent"": ""预测对比报告"", ""time_window"": ""2025-07"", ""warehouse"": ""成都仓"", ""sku"": ""A002"", ""granularity"": ""week"", ""metric"": ""wMAPE"", ""sort_by"": ""wMAPE""}",,,"[MUST] 意图=预测对比报告
[MUST] 时间窗=2025-07
[MUST] 仓=成都仓
[MUST] SKU=A002
[MUST] 粒度=周（week，默认）
[MUST] 评价指标=wMAPE
[SHOULD] 算法集合=平台默认",,,,,,,,,,
INT-018,意图识别,预测对比报告意图识别,只有时间,出 2024Q4 的预测对比报告，按仓汇总展示`,,,"解析结果JSON: {""intent"": ""预测对比报告"", ""time_window"": ""2024Q4"", ""aggregation_dimension"": ""物理仓"", ""algorithms"": ""default"", ""metrics"": [""WMAPE"", ""MASE""]}",,,"[MUST] 意图=预测对比报告
[MUST] 时间窗=2024Q4
[MUST] 汇总维度=物理仓
[SHOULD] 默认算法集合=平台默认
[SHOULD] 指标=WMAPE/MASE（如未指明给默认集）",,,,,,,,,,
INT-019,意图识别,预测对比报告意图识别,单仓+时间+算法,生成 2025年7月 成都仓 的预测算法对比报告（算法：MA/ETS/Croston，按周）,,,"解析结果JSON: {""intent"": ""预测对比报告"", ""time_window"": ""2025-07"", ""warehouse"": ""成都仓"", ""granularity"": ""week"", ""algorithms"": [""MA"", ""ETS"", ""Croston""]}",,,"[MUST] 意图=预测对比报告
[MUST] 时间窗=2025-07
[MUST] 仓=成都仓
[MUST] 粒度=周（week）
[MUST] 算法集合={MA, ETS, Croston}",,,,,,,,,,
INT-020,意图识别,预测对比报告意图识别,多仓+时间+算法,出一份 7月 珠海仓+北京仓 的预测对比，看 **MA 和 ETS** 谁更准（按周）,,,"解析结果JSON: {""intent"": ""预测对比报告"", ""time_window"": ""2025-07"", ""warehouse_list"": [""珠海仓"", ""北京仓""], ""granularity"": ""week"", ""algorithms"": [""MA"", ""ETS""]}",,,"[MUST] 意图=预测对比报告
[MUST] 时间窗=2025-07
[MUST] 仓集合={珠海仓, 北京仓}
[MUST] 粒度=周（week）
[MUST] 算法集合={MA, ETS}",,,,,,,,,,
INT-022,意图识别,预测对比报告意图识别,仓别名/纠错,给 **帝都仓** 做 **7月** 预测对比，包含 **Croston**,,,"解析结果JSON: {""intent"": ""预测对比报告"", ""time_window"": ""2025-07"", ""warehouse"": ""北京仓"", ""warehouse_alias"": ""帝都仓"", ""granularity"": ""week"", ""algorithms_include"": [""Croston""]}",,,"[MUST] 意图=预测对比报告
[MUST] 时间窗=2025-07
[MUST] 仓=北京仓（别名""帝都仓""映射）
[MUST] 粒度=周（week）
[MUST] 算法集合包含=Croston
[SHOULD] 支持别名映射",,,,,,,,,,
INT-025,意图识别,活动调整预测意图识别,抽取活动窗口、对象与 uplift（百分比）,`7/10-7/20 成都仓 A001 陈列促销，预计 +30%，调整预测`,,,"解析结果JSON: {""intent"": ""活动调整预测"", ""activity_window"": ""2025-07-10~2025-07-20"", ""sku"": ""A001"", ""warehouse"": ""成都仓"", ""adjustment_method"": ""+30%"", ""adjustment_type"": ""relative""}",,,"[MUST] 意图=活动调整预测
[MUST] 活动窗=07-10~07-20
[MUST] SKU=A001
[MUST] 仓=成都仓
[MUST] 调整方式=+30%（相对提升）
[SHOULD] 作用粒度=日/周（平台既定）",,,,,,,,,,
INT-026,意图识别,活动调整预测意图识别,抽取"绝对加量/日"的活动设定，全仓范围,`A002 全渠道 7月12-14 日直播，每日 +400，调上去`,,,"解析结果JSON: {""intent"": ""活动调整预测"", ""activity_window"": ""2025-07-12~2025-07-14"", ""sku"": ""A002"", ""warehouse"": ""all"", ""adjustment_method"": ""+400/day"", ""adjustment_type"": ""absolute""}",,,"[MUST] 意图=活动调整预测
[MUST] 活动窗=07-12~07-14
[MUST] SKU=A002
[MUST] 仓=全部仓（全渠道）
[MUST] 调整方式=+400/日（绝对增量）
[SHOULD] 冲突处理=与既有活动合并策略",,,,,,,,,,
INT-027,意图识别,活动调整预测意图识别,标准活动上调（百分比+时间+范围）,**7/10–7/12** 成都仓 **A002** 预测 **上调20%**,,,"解析结果JSON: {""intent"": ""活动调整预测"", ""activity_window"": ""2025-07-10~2025-07-12"", ""warehouse"": ""成都仓"", ""sku"": ""A002"", ""adjustment_method"": ""+20%"", ""adjustment_type"": ""relative"", ""apply_mode"": ""覆盖窗口""}",,,"[MUST] 意图=活动调整预测
[MUST] 活动窗口=2025-07-10~2025-07-12
[MUST] 仓=成都仓
[MUST] SKU=A002
[MUST] 调整方式=+20%（相对提升）
[SHOULD] 应用模式=覆盖窗口",,,,,,,,,,
INT-028,意图识别,活动调整预测意图识别,多仓同调,**7月第二周** **北京/珠海** 全部SKU **+15%**,,,"解析结果JSON: {""intent"": ""活动调整预测"", ""activity_window"": ""2025-07-W2"", ""warehouse_list"": [""北京仓"", ""珠海仓""], ""sku"": ""all"", ""adjustment_method"": ""+15%"", ""adjustment_type"": ""relative""}",,,"[MUST] 意图=活动调整预测
[MUST] 活动窗口=2025-07-W2（第二周）
[MUST] 仓集合={北京仓, 珠海仓}
[MUST] SKU=全部SKU
[MUST] 调整方式=+15%（相对提升）",,,,,,,,,,
INT-029,意图识别,活动调整预测意图识别,下调与上限,**7/20** 昆山仓 **A003** **下调10%**，**最大不低于P10**,,,"解析结果JSON: {""intent"": ""活动调整预测"", ""activity_window"": ""2025-07-20"", ""warehouse"": ""昆山仓"", ""sku"": ""A003"", ""adjustment_method"": ""-10%"", ""adjustment_type"": ""relative"", ""lower_bound"": ""P10""}",,,"[MUST] 意图=活动调整预测
[MUST] 活动窗口=2025-07-20
[MUST] 仓=昆山仓
[MUST] SKU=A003
[MUST] 调整方式=-10%（相对下调）
[MUST] 下限约束=P10（不低于第10百分位）",,,,,,,,,,
INT-030,意图识别,活动调整预测意图识别,取消已设活动（撤销）,撤销 **7/10–7/12 成都仓 A002 上调20%** 的活动调整,,,"解析结果JSON: {""intent"": ""活动调整预测"", ""operation_type"": ""revert"", ""original_activity_window"": ""2025-07-10~2025-07-12"", ""original_warehouse"": ""成都仓"", ""original_sku"": ""A002"", ""original_adjustment"": ""+20%""}",,,"[MUST] 意图=活动调整预测
[MUST] 操作类型=撤销（revert）
[MUST] 原活动窗口=2025-07-10~2025-07-12
[MUST] 原仓=成都仓
[MUST] 原SKU=A002
[MUST] 原调整值=+20%",,,,,,,,,,
INT-031,意图识别,活动调整预测意图识别,活动叠加与优先级,**7/15–7/16** 北京仓 **A001** **店庆+10%**，若与 **大促+20%** 重叠，**取较高**,,,"解析结果JSON: {""intent"": ""活动调整预测"", ""activity_window"": ""2025-07-15~2025-07-16"", ""warehouse"": ""北京仓"", ""sku"": ""A001"", ""activity_tags"": [""店庆"", ""大促""], ""conflict_strategy"": ""max""}",,,"[MUST] 意图=活动调整预测
[MUST] 活动窗口=2025-07-15~2025-07-16
[MUST] 仓=北京仓
[MUST] SKU=A001
[MUST] 活动标签={店庆, 大促}
[MUST] 冲突策略=取较高值（max）",,,,,,,,,,
INT-032,意图识别,活动调整预测意图识别,指定渠道/组织范围,**7月第三周** **成都仓** 电商渠道 **+25%**（仅 **BC组织**）,,,"解析结果JSON: {""intent"": ""活动调整预测"", ""activity_window"": ""2025-07-W3"", ""warehouse"": ""成都仓"", ""organization"": ""BC"", ""channel"": ""电商"", ""adjustment_method"": ""+25%"", ""adjustment_type"": ""relative""}",,,"[MUST] 意图=活动调整预测
[MUST] 活动窗口=2025-07-W3（第三周）
[MUST] 仓=成都仓
[MUST] 组织=BC
[MUST] 渠道=电商
[MUST] 调整方式=+25%（相对提升）",,,,,,,,,,
INT-034,意图识别,需求预测意图识别,口语化请求，缺少 SKU 与方法，要求合理默认/补齐策略,`出下月北京仓的预测`,,,"解析结果JSON: {""intent"": ""需求预测"", ""warehouse"": ""北京仓"", ""time_window"": ""next_month"", ""sku"": ""all"", ""forecast_method"": ""auto_best"", ""granularity"": ""week""}",,,"[MUST] 意图=生成需求预测
[MUST] 仓=北京仓
[MUST] 时间窗=下月
[SHOULD] SKU=全部SKU
[SHOULD] 方法=auto_best（或平台默认）
[SHOULD] 粒度=周",,,,,,,,,,
INT-036,意图识别,需求预测意图识别,多SKU多仓,给 **成都/昆山仓** 的 **A001、A003** 出 **7月周预测明细**,,,"解析结果JSON: {""intent"": ""需求预测"", ""time_window"": ""2025-07"", ""warehouse_list"": [""成都仓"", ""昆山仓""], ""sku_list"": [""A001"", ""A003""], ""granularity"": ""week""}",,,"[MUST] 意图=需求预测
[MUST] 时间窗=2025-07
[MUST] 仓集合={成都仓, 昆山仓}
[MUST] SKU集合={A001, A003}
[MUST] 粒度=周（week）",,,,,,,,,,
INT-037,意图识别,需求预测意图识别,缺SKU→默认全部SKU,出 **珠海仓 2025年7月** 的**周预测明细**（全部SKU）,,,"解析结果JSON: {""intent"": ""需求预测"", ""time_window"": ""2025-07"", ""warehouse"": ""珠海仓"", ""granularity"": ""week"", ""sku"": ""all""}",,,"[MUST] 意图=需求预测
[MUST] 时间窗=2025-07
[MUST] 仓=珠海仓
[MUST] 粒度=周（week）
[SHOULD] SKU=全部SKU（默认）",,,,,,,,,,
INT-038,意图识别,需求预测意图识别,粒度固定为周,给 **北京仓 A002** 出 **7月按周** 的预测明细,,,"解析结果JSON: {""intent"": ""需求预测"", ""time_window"": ""2025-07"", ""warehouse"": ""北京仓"", ""sku"": ""A002"", ""granularity"": ""week""}",,,"[MUST] 意图=需求预测
[MUST] 时间窗=2025-07
[MUST] 仓=北京仓
[MUST] SKU=A002
[MUST] 粒度=周（week）",,,,,,,,,,
INT-040,意图识别,需求预测意图识别,跨月周按规则拆分,**7/29–8/4** 这周的明细，**按周粒度**，标记**跨月周**，月度按自然日拆分,,,"解析结果JSON: {""intent"": ""需求预测"", ""time_range"": ""2025-07-29~2025-08-04"", ""granularity"": ""week"", ""split_by_month"": true, ""cross_month_flag"": true}",,,"[MUST] 意图=需求预测
[MUST] 时间范围=2025-07-29~2025-08-04
[MUST] 粒度=周（week）
[MUST] 按月分割导出=是（7月与8月分别）
[MUST] 跨月标记=是",,,,,,,,,,
INT-041,意图识别,KPI报告意图识别,本月 KPI 报告,生成本月 KPI,,,"解析结果JSON: {""intent"": ""KPI报告"", ""time_window"": ""this_month"", ""metrics"": ""default"", ""dimension"": ""SKU×仓""}",,,"[MUST] 意图=生成KPI报告
[MUST] 时间窗=本月
[SHOULD] 未指定指标→metrics=default
[SHOULD] 维度=SKU×仓（或平台默认）",,,,,,,,,,
INT-042,意图识别,KPI报告意图识别,上月 KPI,出上月 KPI,,,"解析结果JSON: {""intent"": ""KPI报告"", ""time_window"": ""last_month"", ""dimension"": ""物理仓"", ""export_format"": ""Excel"", ""metrics"": ""default""}",,,"[MUST] 意图=生成KPI报告
[MUST] 时间窗=上月
[MUST] 维度=物理仓
[SHOULD] 导出=Excel
[SHOULD] 指标集=平台默认或最近一次选择",,,,,,,,,,
FCST-001,需求预测,生成需求预测,按月语义生成预测，实际输出按周粒度落地,请出7月成都仓A001的预测(MA8),"{""user_text"": ""出7月成都仓A001的预测(MA8)"", ""intent"": ""需求预测""}","工具名称：duckdb_query
详细描述：通过mcp的sql查询命令查询需求预测mart_forecast_by_algo明细表，返回对应的明细字段","需求预测表CSV: {""周次"": ""2025-W27~W31"", ""SKU"": ""A001"", ""物理仓"": ""成都仓"", ""需求预测"": [120, 135, 142, 138, 128], ""预测方法"": ""MA8"", ""跨月周标记"": [""N"", ""N"", ""N"", ""N"", ""Y""]}",需求预测明细展示输出.json,"总预测量；覆盖 SKU 数；覆盖仓数；记录行数；日均预测量（等分法）；物理仓；预测量；占比；覆盖 SKU 数
操作：导出预测明细","[MUST] 时间窗解析为7/1-7/31
[MUST] 输出按SKU×仓×周
[MUST] 周内跨月标记正确
[MUST] 方法=MA8
[MUST] 输入为标准JSON（可解析）且 intent=需求预测",,,,,,,,,,
FCST-002,需求预测,生成需求预测,支持多仓列表输入，按仓分别处理,请生成 A001 北京/成都7月预测,"{""user_text"": ""A001 北京/成都7月预测"", ""intent"": ""需求预测""}","工具名称：duckdb_query
详细描述：通过mcp的sql查询命令查询需求预测mart_forecast_by_algo明细表，返回对应的明细字段","需求预测表CSV: {""SKU"": ""A001"", ""物理仓"": [""北京仓"", ""成都仓""], ""周次数"": 5, ""总行数"": 10}；若仓名非法则返回错误列表，其余仓正常处理",需求预测明细展示输出.json,"总预测量；覆盖 SKU 数；覆盖仓数；记录行数；日均预测量（等分法）；物理仓；预测量；占比；覆盖 SKU 数
操作：导出预测明细","[MUST] 产出行数=(仓数×当月周数)
[MUST] 仓名标准化
[MUST] 任一仓名非法则仅该仓报错且其余不受影响
[MUST] 输入为标准JSON（可解析）且 intent=需求预测",,,,,,,,,,
FCST-003,需求预测,生成需求预测,支持多SKU列表输入，按SKU分别处理,请生成 A001、A002成都7月预测,"{""user_text"": ""A001、A002成都7月预测"", ""intent"": ""需求预测""}","工具名称：duckdb_query
详细描述：通过mcp的sql查询命令查询需求预测mart_forecast_by_algo明细表，返回对应的明细字段","需求预测表CSV: {""SKU列表"": [""A001"", ""A002""], ""物理仓"": ""成都仓"", ""周次数"": 5, ""总行数"": 10}；不存在的SKU返回警告日志",需求预测明细展示输出.json,"总预测量；覆盖 SKU 数；覆盖仓数；记录行数；日均预测量（等分法）；物理仓；预测量；占比；覆盖 SKU 数
操作：导出预测明细","[MUST] 行数=(SKU数×周数)
[MUST] SKU去重
[MUST] 不存在的SKU给出可追溯告警
[MUST] 输入为标准JSON（可解析）且 intent=需求预测",,,,,,,,,,
FCST-004,需求预测,生成需求预测,多仓多SKU组合，按笛卡尔积展开,请生成 A001/A002 北京/成都7月预测,"{""user_text"": ""A001/A002 北京/成都7月预测"", ""intent"": ""需求预测""}","工具名称：duckdb_query
详细描述：通过mcp的sql查询命令查询需求预测mart_forecast_by_algo明细表，返回对应的明细字段","需求预测表CSV: {""组合数"": 4, ""SKU×仓组合"": [[""A001"", ""北京仓""], [""A001"", ""成都仓""], [""A002"", ""北京仓""], [""A002"", ""成都仓""]], ""每组周数"": 5, ""总行数"": 20}",需求预测明细展示输出.json,"总预测量；覆盖 SKU 数；覆盖仓数；记录行数；日均预测量（等分法）；物理仓；预测量；占比；覆盖 SKU 数
操作：导出预测明细","[MUST] 行数=(2 SKU×2仓×周数)
[MUST] 无交叉丢失
[MUST] 输出维度完整
[MUST] 输入为标准JSON（可解析）且 intent=需求预测",,,,,,,,,,
FCST-005,需求预测,生成需求预测,支持全部SKU通配，按白名单展开,请生成 全部 SKU 成都7月预测,"{""user_text"": ""全部 SKU 成都7月预测"", ""intent"": ""需求预测""}","工具名称：duckdb_query
详细描述：通过mcp的sql查询命令查询需求预测mart_forecast_by_algo明细表，返回对应的明细字段","需求预测表CSV: {""SKU数量"": ""根据白名单"", ""物理仓"": ""成都仓"", ""分页提示"": ""若超1000行则分批处理""}；返回白名单SKU列表和分页信息",需求预测明细展示输出.json,"总预测量；覆盖 SKU 数；覆盖仓数；记录行数；日均预测量（等分法）；物理仓；预测量；占比；覆盖 SKU 数
操作：导出预测明细","[MUST] 实际展开到白名单SKU集
[MUST] 若超平台上限(如>1000)给分页/分批提示
[MUST] 输入为标准JSON（可解析）且 intent=需求预测",,,,,,,,,,
FCST-006,需求预测,生成需求预测,支持模糊时间表达，正确解析为具体时间,请生成 A001 成都下月预测,"{""user_text"": ""A001 成都下月预测"", ""intent"": ""需求预测""}","工具名称：duckdb_query
详细描述：通过mcp的sql查询命令查询需求预测mart_forecast_by_algo明细表，返回对应的明细字段","需求预测表CSV: {""时间窗"": ""下月转为具体月份(如2025-08)"", ""SKU"": ""A001"", ""物理仓"": ""成都仓"", ""周数"": ""按实际周数(4或5周)""}",需求预测明细展示输出.json,"总预测量；覆盖 SKU 数；覆盖仓数；记录行数；日均预测量（等分法）；物理仓；预测量；占比；覆盖 SKU 数
操作：导出预测明细","[MUST] 正确将""下月""转为下一个自然月
[MUST] 闰月/5周月仍能按周拆分
[MUST] 输入为标准JSON（可解析）且 intent=需求预测",,,,,,,,,,
FCST-007,需求预测,生成需求预测,处理跨月周边界情况，正确标记,请生成 A001 成都 7/29-8/4 这一周预测,"{""user_text"": ""A001 成都 7/29-8/4 这一周预测"", ""intent"": ""需求预测""}","工具名称：duckdb_query
详细描述：通过mcp的sql查询命令查询需求预测mart_forecast_by_algo明细表，返回对应的明细字段","需求预测表CSV: {""周次"": ""2025-W31"", ""周起止"": ""2025-07-29~2025-08-04"", ""跨月周标记"": ""Y"", ""财务拆分说明"": ""按自然日拆分到7月和8月""}",需求预测明细展示输出.json,"总预测量；覆盖 SKU 数；覆盖仓数；记录行数；日均预测量（等分法）；物理仓；预测量；占比；覆盖 SKU 数
操作：导出预测明细","[MUST] 仍按自然周出1条
[MUST] 跨月周标记=Y
[MUST] 周归属口径与月度汇总口径说明一致
[MUST] 输入为标准JSON（可解析）且 intent=需求预测",,,,,,,,,,
FCST-008,需求预测,生成需求预测,缺少预测方法时，使用默认最优算法,请生成 A001成都7月预测,"{""user_text"": ""A001成都7月预测"", ""intent"": ""需求预测""}","工具名称：duckdb_query
详细描述：通过mcp的sql查询命令查询需求预测mart_forecast_by_algo明细表，返回对应的明细字段","需求预测表CSV: {""SKU"": ""A001"", ""物理仓"": ""成都仓"", ""预测方法"": ""auto_best"", ""元数据"": ""使用默认算法""}",需求预测明细展示输出.json,"总预测量；覆盖 SKU 数；覆盖仓数；记录行数；日均预测量（等分法）；物理仓；预测量；占比；覆盖 SKU 数
操作：导出预测明细","[MUST] 方法=auto_best(平台默认)
[MUST] 回写""使用默认算法""的元数据
[MUST] 输入为标准JSON（可解析）且 intent=需求预测",,,,,,,,,,
FCST-009,需求预测,生成需求预测,处理别名仓名，映射到标准仓名,请生成 A001 帝都仓7月预测,"{""user_text"": ""A001 帝都仓7月预测"", ""intent"": ""需求预测""}","工具名称：duckdb_query
详细描述：通过mcp的sql查询命令查询需求预测mart_forecast_by_algo明细表，返回对应的明细字段","需求预测表CSV: {""SKU"": ""A001"", ""输入仓名"": ""帝都仓"", ""标准仓名"": ""北京仓"", ""映射状态"": ""成功""}；若映射失败返回""未知仓""警告，任务继续",需求预测明细展示输出.json,"总预测量；覆盖 SKU 数；覆盖仓数；记录行数；日均预测量（等分法）；物理仓；预测量；占比；覆盖 SKU 数
操作：导出预测明细","[MUST] 别名→标准仓(北京仓)
[MUST] 若无法映射则报""未知仓"",整体任务不中断
[MUST] 输入为标准JSON（可解析）且 intent=需求预测",,,,,,,,,,
FCST-010,需求预测,生成需求预测,处理超长SKU列表，支持批量切片和限流,请生成 A[001..200] 北京7月预测,"{""user_text"": ""A[001..200] 北京7月预测"", ""intent"": ""需求预测""}","工具名称：duckdb_query
详细描述：通过mcp的sql查询命令查询需求预测mart_forecast_by_algo明细表，返回对应的明细字段","需求预测表CSV: {""SKU数量"": 200, ""批次数"": ""按平台限制切片"", ""并发控制"": ""速率限制"", ""合并策略"": ""按SKU排序去重""}",需求预测明细展示输出.json,总预测量；覆盖 SKU 数；覆盖仓数；记录行数；日均预测量（等分法）；物理仓；预测量；占比；覆盖 SKU 数,"[MUST] 触发并验证批量切片、并发/速率控制、合并结果顺序与去重一致性
[MUST] 输入为标准JSON（可解析）且 intent=需求预测",,,,,,,,,,
FCST-012,需求预测,生成需求预测,处理已停采或作废的SKU,请生成 A000(停采)北京7月预测,"{""user_text"": ""A000(停采)北京7月预测"", ""intent"": ""需求预测""}","工具名称：duckdb_query
详细描述：通过mcp的sql查询命令查询需求预测mart_forecast_by_algo明细表，返回对应的明细字段","告警日志: {""SKU"": ""A000"", ""状态"": ""停采"", ""输出行数"": 0, ""告警信息"": ""SKU已停采，无法生成预测""}；整体任务继续执行其他SKU",需求预测明细展示输出.json,总预测量；覆盖 SKU 数；覆盖仓数；记录行数；日均预测量（等分法）；物理仓；预测量；占比；覆盖 SKU 数,"[MUST] 返回0行并有可追溯告警
[MUST] 整体任务不中断
[MUST] 输入为标准JSON（可解析）且 intent=需求预测",,,,,,,,,,
FCST-014,需求预测,生成需求预测,处理别名和全半角字符混用,请生成 A001 帝都仓7月预测,"{""user_text"": ""A001 帝都仓7月预测"", ""intent"": ""需求预测""}","工具名称：duckdb_query
详细描述：通过mcp的sql查询命令查询需求预测mart_forecast_by_algo明细表，返回对应的明细字段","需求预测表CSV: {""SKU"": ""A001"", ""输入仓名"": ""帝都仓"", ""标准仓名"": ""北京仓"", ""输入月份"": ""全角7"", ""标准月份"": 7}",需求预测明细展示输出.json,总预测量；覆盖 SKU 数；覆盖仓数；记录行数；日均预测量（等分法）；物理仓；预测量；占比；覆盖 SKU 数,"[MUST] 别名→北京仓
[MUST] 全角""7""正确解析为7
[MUST] 其余维度不受影响
[MUST] 输入为标准JSON（可解析）且 intent=需求预测",,,,,,,,,,
FCST-018,需求预测,生成预测对比报告,2025年7月成都仓，按周对比,请生成 2025年7月 成都仓 的预测对比（按周）,"{""user_text"": ""生成 2025年7月 成都仓 的预测对比（按周）"", ""intent"": ""需求预测""}","工具名称：duckdb_query
详细描述：通过mcp的sql查询命令查询需求预测mart_forecast_by_algo明细表，返回对应的明细字段","需求预测表: {""表名"": ""需求预测表"", ""时间窗"": ""2025-07"", ""粒度"": ""周"", ""输出列"": [""周次"", ""开始时间"", ""结束时间"", ""SKU编码"", ""SKU名称"", ""归属组织"", ""预计发货物理仓"", ""预计发货仓销售量"", ""需求预测"", ""预测方法"", ""预测误差绝对值"", ""预测误差"", ""预测误差标准差（σ_PP）"", ""跨月周标记""], ""单位"": {""需求预测"": ""件/周"", ""预计发货仓销售量"": ""件/周""}, ""口径"": {""周次"": ""ISO周(YYYY-Www)""}}",预测对比报告展示输出.json,"最优算法；wMAPE；P50 WAPE；P90 WAPE；覆盖样本；算法；总行数；SKU数；仓库数
操作：导出报告","[MUST] 时间窗=2025-07
[MUST] 仓=成都仓
[MUST] 粒度=周
[SHOULD] 输出周起止列
[MUST] 输入为标准JSON（可解析）且 intent=需求预测
[MUST] 输出为需求预测明细（周粒度）
[MUST] 输出列包含={周次, 开始时间, 结束时间, SKU编码, SKU名称, 归属组织, 预计发货物理仓, 预计发货仓销售量, 需求预测, 预测方法, 预测误差绝对值, 预测误差, 预测误差标准差（σ_PP）, 跨月周标记}",,,,,,,,,,
ALLOC-001,调拨计划,生成调拨计划,生成本周全仓调拨计划（默认含在途、默认止拨）,请生成本周的调拨计划,"{""user_text"": ""生成本周的调拨计划"", ""intent"": ""调拨计划"", ""time_window"": ""this_week"", ""include_in_transit"": true, ""stop_allocation_policy"": ""apply""}","工具1：生成调拨建议单；
工具2：查询调拨建议单","调拨建议单表: {""时间窗"": ""本周"", ""包含在途"": true, ""止拨策略"": ""apply"", ""输出列"": [""transfer_id"", ""line_id"", ""request_id"", ""sku"", ""归属组织"", ""物理仓"", ""批次"", ""调出逻辑仓"", ""调入逻辑仓"", ""止拨后可分配量"", ""计划数量"", ""取整后数量"", ""线路/车次（预留）"", ""体积/重量"", ""ETA"", ""备注""], ""合计约束"": ""按调出逻辑仓分组求和(计划数量) ≤ 对应止拨后可分配量""}",调拨计划展示输出.json,"建议调拨量；覆盖率；缺口行数；运输体积；缺口件数；物理仓；SKU数量；调拨数量；缺口/覆盖率；运输体积(m³)；运输重量(kg)；总体积；预估重量；线路可用
操作：导出补货计划、导出调拨建议单、调拨单","[MUST] 时间窗=本周（this_week）
[MUST] 包含在途=是（true）
[MUST] 止拨策略=应用（apply）
[MUST] 输出列包含={SKU, 调出逻辑仓, 调入逻辑仓, 数量, ETA, 批次}
[SHOULD] 合计≤止拨后可分配量
[MUST] 输入为标准JSON（可解析）且 intent=调拨计划",,,,,,,,,,
ALLOC-002,调拨计划,生成调拨计划,仅输出今日触发的补货行,请生成今天的调拨计划，仅输出今日触发的补货行,"{""user_text"": ""今天的调拨计划是什么？"", ""intent"": ""调拨计划"", ""inspection_date"": ""today"", ""trigger_condition"": ""inventory_water_level<rop_day""}",工具：查询调拨建议单,"调拨建议单表: {""巡检日期"": ""today"", ""触发条件"": ""库存水位<ROP(日)"", ""触发行"": ""仅今日触发的补货"", ""附加列"": ""触发原因（如库存不足/在途延迟）"", ""输出列"": [""transfer_id"", ""line_id"", ""request_id"", ""sku"", ""归属组织"", ""物理仓"", ""批次"", ""调出逻辑仓"", ""调入逻辑仓"", ""止拨后可分配量"", ""计划数量"", ""取整后数量"", ""线路/车次（预留）"", ""体积/重量"", ""ETA"", ""备注""], ""合计约束"": ""按调出逻辑仓分组求和(计划数量) ≤ 对应止拨后可分配量""}",调拨计划展示输出.json,"建议调拨量；覆盖率；缺口行数；运输体积；缺口件数；物理仓；SKU数量；调拨数量；缺口/覆盖率；运输体积(m³)；运输重量(kg)；总体积；预估重量；线路可用
操作：导出补货计划、导出调拨建议单、调拨单","[MUST] 时间窗=今天（today）
[MUST] 触发条件=库存水位<ROP
[SHOULD] 附触发原因列
[MUST] 输入为标准JSON（可解析）且 intent=调拨计划",,,,,,,,,,
ALLOC-003,调拨计划,生成调拨计划,止拨限制导致未分配进入未分配清单,请生成本周北京仓的调拨计划（严格止拨），并输出未分配清单,"{""intent"": ""调拨计划"", ""warehouse"": ""北京仓"", ""time_window"": ""this_week"", ""stop_allocation_policy"": ""strict""}","工具1：查询调拨建议单；
工具2：查询未分配清单表","调拨建议单表 + 未分配清单表: {""仓"": ""北京仓"", ""止拨策略"": ""strict"", ""未满足缺口"": ""进入未分配清单"", ""原因标注"": ""止拨不足"", ""输出列"": [""transfer_id"", ""line_id"", ""request_id"", ""sku"", ""归属组织"", ""物理仓"", ""批次"", ""调出逻辑仓"", ""调入逻辑仓"", ""止拨后可分配量"", ""计划数量"", ""取整后数量"", ""线路/车次（预留）"", ""体积/重量"", ""ETA"", ""备注""], ""合计约束"": ""按调出逻辑仓分组求和(计划数量) ≤ 对应止拨后可分配量"", ""未分配清单.输出列"": [""SKU"", ""批次"", ""调出逻辑仓"", ""原计划数量"", ""未分配数量"", ""未分配原因"", ""约束类型"", ""约束参数"", ""备注""], ""未分配清单.原因值域"": [""止拨不足"", ""小于最小拆分量"", ""超K限制"", ""托盘不拆"", ""装箱取整残量""]}",调拨计划展示输出.json,"建议调拨量；覆盖率；缺口行数；运输体积；缺口件数；物理仓；SKU数量；调拨数量；缺口/覆盖率；运输体积(m³)；运输重量(kg)；总体积；预估重量；线路可用
操作：导出补货计划、导出调拨建议单、调拨单","[MUST] 止拨策略=严格（strict）
[MUST] 未满足缺口→未分配清单
[SHOULD] 原因=止拨不足
[MUST] 输入为标准JSON（可解析）且 intent=调拨计划
[MUST] 未分配清单输出列包含={SKU, 批次, 调出逻辑仓, 原计划数量, 未分配数量, 未分配原因}
[SHOULD] 未分配原因∈{止拨不足, 小于最小拆分量, 超K限制, 托盘不拆, 装箱取整残量}",,,,,,,,,,
ALLOC-005,调拨计划,生成调拨计划,批次最多 2 去向，每去向≥3箱,请生成本周的调拨计划，单批次最多拆分至2个去向，且每个去向至少3箱,"{""intent"": ""调拨计划"", ""time_window"": ""this_week"", ""k_limit"": 2, ""min_split_cases"": 3}","工具1：生成调拨建议单；
工具2：查询调拨建议单；
工具3：查询未分配清单表","调拨建议单表 + 未分配清单表: {""K限制"": 2, ""最小拆分量"": ""3箱"", ""批次去向数校验"": ""≤2"", ""每去向数量校验"": ""≥3箱"", ""超限残量"": ""进入未分配清单"", ""输出列"": [""transfer_id"", ""line_id"", ""request_id"", ""sku"", ""归属组织"", ""物理仓"", ""批次"", ""调出逻辑仓"", ""调入逻辑仓"", ""止拨后可分配量"", ""计划数量"", ""取整后数量"", ""线路/车次（预留）"", ""体积/重量"", ""ETA"", ""备注""], ""合计约束"": ""按调出逻辑仓分组求和(计划数量) ≤ 对应止拨后可分配量"", ""未分配清单.输出列"": [""SKU"", ""批次"", ""调出逻辑仓"", ""原计划数量"", ""未分配数量"", ""未分配原因"", ""约束类型"", ""约束参数"", ""备注""], ""未分配清单.原因值域"": [""止拨不足"", ""小于最小拆分量"", ""超K限制"", ""托盘不拆"", ""装箱取整残量""]}",调拨计划展示输出.json,"建议调拨量；覆盖率；缺口行数；运输体积；缺口件数；物理仓；SKU数量；调拨数量；缺口/覆盖率；运输体积(m³)；运输重量(kg)；总体积；预估重量；线路可用
操作：导出补货计划、导出调拨建议单、调拨单","[MUST] K限制=2
[MUST] 最小拆分量=3箱
[MUST] 任一批次去向数≤2
[MUST] 每去向≥3箱
[SHOULD] 超限残量进入未分配清单
[MUST] 输入为标准JSON（可解析）且 intent=调拨计划
[MUST] 未分配清单输出列包含={SKU, 批次, 调出逻辑仓, 原计划数量, 未分配数量, 未分配原因}
[SHOULD] 未分配原因∈{止拨不足, 小于最小拆分量, 超K限制, 托盘不拆, 装箱取整残量}",,,,,,,,,,
ALLOC-008,调拨计划,生成调拨计划,只对 A001/A002 生成计划,请生成调拨计划：只做 A001 和 A002 的本周调拨,"{""user_text"": ""只做 A001 和 A002 的本周调拨"", ""intent"": ""调拨计划"", ""time_window"": ""this_week"", ""sku_list"": [""A001"", ""A002""]}","工具1：生成调拨建议单；
工具2：查询调拨建议单","调拨建议单表: {""SKU集合"": [""A001"", ""A002""], ""时间窗"": ""本周"", ""输出约束"": ""仅这两类SKU"", ""输出列"": [""transfer_id"", ""line_id"", ""request_id"", ""sku"", ""归属组织"", ""物理仓"", ""批次"", ""调出逻辑仓"", ""调入逻辑仓"", ""止拨后可分配量"", ""计划数量"", ""取整后数量"", ""线路/车次（预留）"", ""体积/重量"", ""ETA"", ""备注""], ""合计约束"": ""按调出逻辑仓分组求和(计划数量) ≤ 对应止拨后可分配量""}",调拨计划展示输出.json,"建议调拨量；覆盖率；缺口行数；运输体积；缺口件数；物理仓；SKU数量；调拨数量；缺口/覆盖率；运输体积(m³)；运输重量(kg)；总体积；预估重量；线路可用
操作：导出补货计划、导出调拨建议单、调拨单","[MUST] SKU集合={A001, A002}
[MUST] 仅输出这两类SKU
[MUST] 输入为标准JSON（可解析）且 intent=调拨计划",,,,,,,,,,
RPT-001,生成报告,生成KPI报告,输出 7 月 KPI 总览（全仓）,请生成 7月 的 KPI 报告,"{""user_text"": ""生成 7月 的 KPI 报告"", ""intent"": ""生成报告""}","工具名称：duckdb_query
描述：查询KPI报告","KPI报告表: {""时间窗"": ""2025-07"", ""指标"": {""本地订单履约率"": ""85.2%"", ""拆单率"": ""12.5%"", ""缺货率"": ""3.1%"", ""旧批占比"": ""8.7%"", ""运费/单"": ""¥15.8""}, ""环比上月"": {""履约率"": ""+2.3%"", ""拆单率"": ""-0.8%""}}",KPI报告展示输出.json,"本地履约率；拆单率；旧批次拆单占比；订单量；指标；上周；环比；同期；趋势；仓；总运费；订单运费；调拨运费；加权单位物流成本；拆单额外成本；省份；单位物流成本（元/m³）
操作：导出报告","[MUST] 时间窗=2025-07（月）
[MUST] 指标包含={本地订单履约率, 拆单率, 缺货率, 旧批占比, 运费/单}
[SHOULD] 上月对比
[MUST] 输入为标准JSON（可解析）且 intent=生成报告",,,,,,,,,,
RPT-002,生成报告,生成KPI报告,本周按仓拆分 KPI,请生成 本周 KPI（按仓）,"{""user_text"": ""生成 本周 KPI（按仓）"", ""intent"": ""生成报告""}","工具名称：duckdb_query
描述：查询KPI报告","KPI报告表（按仓）: {""时间窗"": ""本周"", ""粒度"": ""仓"", ""数据"": [{""仓"": ""成都仓"", ""履约率"": ""82%""}, {""仓"": ""北京仓"", ""履约率"": ""88%""}], ""排序"": ""按履约率升序""}",KPI报告展示输出.json,"本地履约率；拆单率；旧批次拆单占比；订单量；指标；上周；环比；同期；趋势；仓；总运费；订单运费；调拨运费；加权单位物流成本；拆单额外成本；省份；单位物流成本（元/m³）
操作：导出报告","[MUST] 时间窗=本周（this_week）
[MUST] 粒度=仓
[SHOULD] 排序=本地履约率升序
[MUST] 输入为标准JSON（可解析）且 intent=生成报告",,,,,,,,,,
RPT-004,生成报告,生成KPI报告,跨月周统计口径一致（财务按自然日拆账）,请生成KPI报告：本周跨月 仍生成 KPI,"{""user_text"": ""本周跨月 仍生成 KPI"", ""intent"": ""生成报告""}","工具名称：duckdb_query
描述：查询KPI报告","KPI报告表: {""周次"": ""本周"", ""跨月标记"": ""是"", ""周口径"": ""自然周"", ""财务拆账"": ""按自然日拆分到相邻月份"", ""提示"": ""月度汇总需按日拆分""}",KPI报告展示输出.json,"本地履约率；拆单率；旧批次拆单占比；订单量；指标；上周；环比；同期；趋势；仓；总运费；订单运费；调拨运费；加权单位物流成本；拆单额外成本；省份；单位物流成本（元/m³）
操作：导出报告","[MUST] 跨月标记=是
[MUST] 周口径=自然周
[SHOULD] 月度拆账提示
[MUST] 输入为标准JSON（可解析）且 intent=生成报告",,,,,,,,,,
RPT-007,生成报告,生成KPI报告,每张摘要卡的字段齐全,请生成上周KPI报告,"{""user_text"": ""生成上周KPI报告"", ""intent"": ""生成报告""}","工具名称：duckdb_query
描述：查询KPI报告","KPI报告-摘要卡字段: {""每张卡字段"": [""value"", ""wow_delta"", ""trend""], ""字段状态"": ""非空且可解析""}",KPI报告展示输出.json,"本地履约率；拆单率；旧批次拆单占比；订单量；指标；上周；环比；同期；趋势；仓；总运费；订单运费；调拨运费；加权单位物流成本；拆单额外成本；省份；单位物流成本（元/m³）
操作：导出报告","[MUST] 每张卡包含={value, wow_delta, trend}
[MUST] 字段非空且可解析
[MUST] 输入为标准JSON（可解析）且 intent=生成报告",,,,,,,,,,
RPT-013,生成报告,生成KPI报告,运输成本分析（本月）4 张卡片全部出现,请生成本月KPI报告,"{""user_text"": ""生成本月KPI报告"", ""intent"": ""生成报告"", ""time_window"": ""this_month""}","工具名称：duckdb_query
描述：查询KPI报告","KPI报告-运输成本卡: {""成本卡数量"": 4, ""卡片标题"": [""总运费"", ""订单运费"", ""调拨运费"", ""加权单位物流成本""], ""验证"": ""全部成本卡存在""}",KPI报告展示输出.json,"本地履约率；拆单率；旧批次拆单占比；订单量；指标；上周；环比；同期；趋势；仓；总运费；订单运费；调拨运费；加权单位物流成本；拆单额外成本；省份；单位物流成本（元/m³）
操作：导出报告","[MUST] 成本卡标题包含={总运费, 订单运费, 调拨运费, 加权单位物流成本}
[MUST] 全部成本卡存在
[MUST] 输入为标准JSON（可解析）且 intent=生成报告
[MUST] 时间窗=本月（this_month）",,,,,,,,,,
RPL-001,补货计划,生成补货计划,生成本周补货计划（默认口径）,帮我生成本周的补货计划，考虑在途库存，数量按箱向上取整，按系统默认止拨策略执行,"{""user_text"": ""时间窗=本周；计入在途=是；取整=按箱（向上）；止拨策略=apply"", ""intent"": ""补货计划""}","工具名称1：生成补货计划；
工具名称2：查询补货计划","补货计划表: {""表名"": ""补货计划表"", ""时间窗"": ""本周"", ""粒度"": ""日"", ""输出列"": [""request_id"", ""record_id"", ""归属组织"", ""sku"", ""物理仓"", ""巡检日期"", ""即时库存"", ""在途库存"", ""可用库存"", ""库存水位"", ""ROP（日）"", ""目标库存（日）"", ""理论缺口"", ""止拨后可分配量"", ""建议补货量"", ""实际补货量"", ""触发状态/原因"", ""预计到达"", ""备注""], ""单位"": {""即时库存"": ""PCS"", ""在途库存"": ""PCS"", ""可用库存"": ""PCS"", ""库存水位"": ""PCS"", ""ROP（日）"": ""PCS"", ""目标库存（日）"": ""PCS"", ""理论缺口"": ""PCS"", ""止拨后可分配量"": ""PCS"", ""建议补货量"": ""PCS"", ""实际补货量"": ""PCS""}, ""口径"": {""库存水位"": ""可用库存 + 在途库存"", ""理论缺口"": ""max(0, 目标库存（日） − 库存水位)"", ""建议补货量"": ""min(理论缺口, 止拨后可分配量)"", ""实际补货量"": ""按装箱数取整/裁剪后"", ""预计到达"": ""巡检日期 + 运输提前期""}}",补货计划展示输出.json,"建议补货量（取整后）；理论缺口；缺口覆盖率；触发行数；物理仓；触发SKU数；理论缺口(件)；建议补货量(件)；覆盖率；在途库存(件)；库存水位(件)
操作：导出补货计划","MUST 触发条件：库存水位≤ROP（日）；MUST 库存水位=可用库存+在途库存；MUST 理论缺口=max(0, 目标库存（日）−库存水位)；MUST 建议补货量=min(理论缺口, 止拨后可分配量)；MUST 实际补货量=按装箱数向上取整；SHOULD 缺口覆盖率=建议补货量/理论缺口
[MUST] 输入为标准JSON（可解析）且 intent=补货计划
[MUST] 输出为补货计划明细（日粒度）
[MUST] 输出列包含={request_id, record_id, 归属组织, sku, 物理仓, 巡检日期, 即时库存, 在途库存, 可用库存, 库存水位, ROP（日）, 目标库存（日）, 理论缺口, 止拨后可分配量, 建议补货量, 实际补货量, 触发状态/原因, 预计到达, 备注}",,,,,,,,,,
RPL-003,补货计划,生成补货计划,对比周基准与日更版,请分别按“周基准版”和“日更版”各生成一次补货计划，用于对比差异。,"{""user_text"": ""版本=weekly_baseline vs daily_refresh"", ""intent"":""补货计划"",""time_window"":""this_week"",""include_in_transit"":true}","工具名称1：生成补货计划；
工具名称2：查询补货计划","补货计划表: {""表名"": ""补货计划表"", ""时间窗"": ""本周"", ""粒度"": ""日"", ""输出列"": [""request_id"", ""record_id"", ""归属组织"", ""sku"", ""物理仓"", ""巡检日期"", ""即时库存"", ""在途库存"", ""可用库存"", ""库存水位"", ""ROP（日）"", ""目标库存（日）"", ""理论缺口"", ""止拨后可分配量"", ""建议补货量"", ""实际补货量"", ""触发状态/原因"", ""预计到达"", ""备注""], ""单位"": {""即时库存"": ""PCS"", ""在途库存"": ""PCS"", ""可用库存"": ""PCS"", ""库存水位"": ""PCS"", ""ROP（日）"": ""PCS"", ""目标库存（日）"": ""PCS"", ""理论缺口"": ""PCS"", ""止拨后可分配量"": ""PCS"", ""建议补货量"": ""PCS"", ""实际补货量"": ""PCS""}, ""口径"": {""库存水位"": ""可用库存 + 在途库存"", ""理论缺口"": ""max(0, 目标库存（日） − 库存水位)"", ""建议补货量"": ""min(理论缺口, 止拨后可分配量)"", ""实际补货量"": ""按装箱数取整/裁剪后"", ""预计到达"": ""巡检日期 + 运输提前期""}}",补货计划展示输出.json,"建议补货量（取整后）；理论缺口；缺口覆盖率；触发行数；物理仓；触发SKU数；理论缺口(件)；建议补货量(件)；覆盖率；在途库存(件)；库存水位(件)
操作：导出补货计划","MUST 两版都按同一触发口径；SHOULD 日更版在同周内目标库存使用“日折减”口径
[MUST] 输入为标准JSON（可解析）且 intent=补货计划
[MUST] 输出为补货计划明细（日粒度）
[MUST] 输出列包含={request_id, record_id, 归属组织, sku, 物理仓, 巡检日期, 即时库存, 在途库存, 可用库存, 库存水位, ROP（日）, 目标库存（日）, 理论缺口, 止拨后可分配量, 建议补货量, 实际补货量, 触发状态/原因, 预计到达, 备注}",,,,,,,,,,
RPL-008,补货计划,生成补货计划,默认取整规则,请生成补货计划，数量按箱向上取整。,"{""user_text"": ""取整=按箱（向上）"", ""intent"": ""补货计划""}",不需要此场景，作为默认规则的校验点,"补货计划表: {""表名"": ""补货计划表"", ""时间窗"": ""本周"", ""粒度"": ""日"", ""输出列"": [""request_id"", ""record_id"", ""归属组织"", ""sku"", ""物理仓"", ""巡检日期"", ""即时库存"", ""在途库存"", ""可用库存"", ""库存水位"", ""ROP（日）"", ""目标库存（日）"", ""理论缺口"", ""止拨后可分配量"", ""建议补货量"", ""实际补货量"", ""触发状态/原因"", ""预计到达"", ""备注""], ""单位"": {""即时库存"": ""PCS"", ""在途库存"": ""PCS"", ""可用库存"": ""PCS"", ""库存水位"": ""PCS"", ""ROP（日）"": ""PCS"", ""目标库存（日）"": ""PCS"", ""理论缺口"": ""PCS"", ""止拨后可分配量"": ""PCS"", ""建议补货量"": ""PCS"", ""实际补货量"": ""PCS""}, ""口径"": {""库存水位"": ""可用库存 + 在途库存"", ""理论缺口"": ""max(0, 目标库存（日） − 库存水位)"", ""建议补货量"": ""min(理论缺口, 止拨后可分配量)"", ""实际补货量"": ""按装箱数取整/裁剪后"", ""预计到达"": ""巡检日期 + 运输提前期""}}",补货计划展示输出.json,"建议补货量（取整后）；理论缺口；缺口覆盖率；触发行数；物理仓；触发SKU数；理论缺口(件)；建议补货量(件)；覆盖率；在途库存(件)；库存水位(件)
操作：导出补货计划","MUST 实际补货量为装箱数整数倍；MUST 实际≥建议且超出<一箱
[MUST] 输入为标准JSON（可解析）且 intent=补货计划
[MUST] 输出为补货计划明细（日粒度）
[MUST] 输出列包含={request_id, record_id, 归属组织, sku, 物理仓, 巡检日期, 即时库存, 在途库存, 可用库存, 库存水位, ROP（日）, 目标库存（日）, 理论缺口, 止拨后可分配量, 建议补货量, 实际补货量, 触发状态/原因, 预计到达, 备注}",,,,,,,,,,
RPL-011,补货计划,生成补货计划,汇总表正确性,请生成补货计划，仅包含北京、昆山、成都、珠海四个仓的数据，并提供对应汇总。,"{""user_text"": ""仓=北京/昆山/成都/珠海"", ""intent"": ""补货计划""}",工具名称：查询补货计划表,"补货计划表: {""表名"": ""补货计划表"", ""时间窗"": ""本周"", ""粒度"": ""日"", ""输出列"": [""request_id"", ""record_id"", ""归属组织"", ""sku"", ""物理仓"", ""巡检日期"", ""即时库存"", ""在途库存"", ""可用库存"", ""库存水位"", ""ROP（日）"", ""目标库存（日）"", ""理论缺口"", ""止拨后可分配量"", ""建议补货量"", ""实际补货量"", ""触发状态/原因"", ""预计到达"", ""备注""], ""单位"": {""即时库存"": ""PCS"", ""在途库存"": ""PCS"", ""可用库存"": ""PCS"", ""库存水位"": ""PCS"", ""ROP（日）"": ""PCS"", ""目标库存（日）"": ""PCS"", ""理论缺口"": ""PCS"", ""止拨后可分配量"": ""PCS"", ""建议补货量"": ""PCS"", ""实际补货量"": ""PCS""}, ""口径"": {""库存水位"": ""可用库存 + 在途库存"", ""理论缺口"": ""max(0, 目标库存（日） − 库存水位)"", ""建议补货量"": ""min(理论缺口, 止拨后可分配量)"", ""实际补货量"": ""按装箱数取整/裁剪后"", ""预计到达"": ""巡检日期 + 运输提前期""}}",补货计划展示输出.json,"建议补货量（取整后）；理论缺口；缺口覆盖率；触发行数；物理仓；触发SKU数；理论缺口(件)；建议补货量(件)；覆盖率；在途库存(件)；库存水位(件)
操作：导出补货计划","MUST 列：触发SKU数/理论缺口/建议补货量/覆盖率/在途库存/库存水位；MUST 行合计=明细求和
[MUST] 输入为标准JSON（可解析）且 intent=补货计划
[MUST] 输出为补货计划明细（日粒度）
[MUST] 输出列包含={request_id, record_id, 归属组织, sku, 物理仓, 巡检日期, 即时库存, 在途库存, 可用库存, 库存水位, ROP（日）, 目标库存（日）, 理论缺口, 止拨后可分配量, 建议补货量, 实际补货量, 触发状态/原因, 预计到达, 备注}",,,,,,,,,,
RPL-012,补货计划,生成补货计划,仅看北京仓,请生成补货计划，仅查看北京仓的数据。,"{""user_text"": ""过滤：物理仓=北京仓"", ""intent"":""补货计划"",""time_window"":""this_week"",""include_in_transit"":true}",工具名称：查询补货计划表,"补货计划表: {""表名"": ""补货计划表"", ""时间窗"": ""本周"", ""粒度"": ""日"", ""输出列"": [""request_id"", ""record_id"", ""归属组织"", ""sku"", ""物理仓"", ""巡检日期"", ""即时库存"", ""在途库存"", ""可用库存"", ""库存水位"", ""ROP（日）"", ""目标库存（日）"", ""理论缺口"", ""止拨后可分配量"", ""建议补货量"", ""实际补货量"", ""触发状态/原因"", ""预计到达"", ""备注""], ""单位"": {""即时库存"": ""PCS"", ""在途库存"": ""PCS"", ""可用库存"": ""PCS"", ""库存水位"": ""PCS"", ""ROP（日）"": ""PCS"", ""目标库存（日）"": ""PCS"", ""理论缺口"": ""PCS"", ""止拨后可分配量"": ""PCS"", ""建议补货量"": ""PCS"", ""实际补货量"": ""PCS""}, ""口径"": {""库存水位"": ""可用库存 + 在途库存"", ""理论缺口"": ""max(0, 目标库存（日） − 库存水位)"", ""建议补货量"": ""min(理论缺口, 止拨后可分配量)"", ""实际补货量"": ""按装箱数取整/裁剪后"", ""预计到达"": ""巡检日期 + 运输提前期""}}",补货计划展示输出.json,"建议补货量（取整后）；理论缺口；缺口覆盖率；触发行数；物理仓；触发SKU数；理论缺口(件)；建议补货量(件)；覆盖率；在途库存(件)；库存水位(件)
操作：导出补货计划","MUST 仅输出北京仓；MUST 合计与仓级汇总北京仓一致
[MUST] 输入为标准JSON（可解析）且 intent=补货计划
[MUST] 输出为补货计划明细（日粒度）
[MUST] 输出列包含={request_id, record_id, 归属组织, sku, 物理仓, 巡检日期, 即时库存, 在途库存, 可用库存, 库存水位, ROP（日）, 目标库存（日）, 理论缺口, 止拨后可分配量, 建议补货量, 实际补货量, 触发状态/原因, 预计到达, 备注}",,,,,,,,,,
RPL-013,补货计划,生成补货计划,指定 SKU 列表,请生成补货计划，仅包含 SKU A001 和 A002。,"{""user_text"": ""SKU∈{A001,A002}"", ""intent"":""补货计划"",""time_window"":""this_week"",""include_in_transit"":true}",工具名称：查询补货计划表,"补货计划表: {""表名"": ""补货计划表"", ""时间窗"": ""本周"", ""粒度"": ""日"", ""输出列"": [""request_id"", ""record_id"", ""归属组织"", ""sku"", ""物理仓"", ""巡检日期"", ""即时库存"", ""在途库存"", ""可用库存"", ""库存水位"", ""ROP（日）"", ""目标库存（日）"", ""理论缺口"", ""止拨后可分配量"", ""建议补货量"", ""实际补货量"", ""触发状态/原因"", ""预计到达"", ""备注""], ""单位"": {""即时库存"": ""PCS"", ""在途库存"": ""PCS"", ""可用库存"": ""PCS"", ""库存水位"": ""PCS"", ""ROP（日）"": ""PCS"", ""目标库存（日）"": ""PCS"", ""理论缺口"": ""PCS"", ""止拨后可分配量"": ""PCS"", ""建议补货量"": ""PCS"", ""实际补货量"": ""PCS""}, ""口径"": {""库存水位"": ""可用库存 + 在途库存"", ""理论缺口"": ""max(0, 目标库存（日） − 库存水位)"", ""建议补货量"": ""min(理论缺口, 止拨后可分配量)"", ""实际补货量"": ""按装箱数取整/裁剪后"", ""预计到达"": ""巡检日期 + 运输提前期""}}",补货计划展示输出.json,"建议补货量（取整后）；理论缺口；缺口覆盖率；触发行数；物理仓；触发SKU数；理论缺口(件)；建议补货量(件)；覆盖率；在途库存(件)；库存水位(件)
操作：导出补货计划","MUST 仅两类SKU行；MUST 汇总口径不含其他SKU
[MUST] 输入为标准JSON（可解析）且 intent=补货计划
[MUST] 输出为补货计划明细（日粒度）
[MUST] 输出列包含={request_id, record_id, 归属组织, sku, 物理仓, 巡检日期, 即时库存, 在途库存, 可用库存, 库存水位, ROP（日）, 目标库存（日）, 理论缺口, 止拨后可分配量, 建议补货量, 实际补货量, 触发状态/原因, 预计到达, 备注}",,,,,,,,,,
RPL-020,补货计划,生成补货计划,本周跨月,请生成跨月周的补货计划（仍按自然周计算）。,"{""user_text"": ""时间窗跨月周"", ""intent"": ""补货计划""}",工具名称：查询补货计划表,"补货计划表: {""表名"": ""补货计划表"", ""时间窗"": ""跨月周"", ""粒度"": ""日"", ""输出列"": [""request_id"", ""record_id"", ""归属组织"", ""sku"", ""物理仓"", ""巡检日期"", ""即时库存"", ""在途库存"", ""可用库存"", ""库存水位"", ""ROP（日）"", ""目标库存（日）"", ""理论缺口"", ""止拨后可分配量"", ""建议补货量"", ""实际补货量"", ""触发状态/原因"", ""预计到达"", ""备注""], ""单位"": {""即时库存"": ""PCS"", ""在途库存"": ""PCS"", ""可用库存"": ""PCS"", ""库存水位"": ""PCS"", ""ROP（日）"": ""PCS"", ""目标库存（日）"": ""PCS"", ""理论缺口"": ""PCS"", ""止拨后可分配量"": ""PCS"", ""建议补货量"": ""PCS"", ""实际补货量"": ""PCS""}, ""口径"": {""库存水位"": ""可用库存 + 在途库存"", ""理论缺口"": ""max(0, 目标库存（日） − 库存水位)"", ""建议补货量"": ""min(理论缺口, 止拨后可分配量)"", ""实际补货量"": ""按装箱数取整/裁剪后"", ""预计到达"": ""巡检日期 + 运输提前期""}}",补货计划展示输出.json,"建议补货量（取整后）；理论缺口；缺口覆盖率；触发行数；物理仓；触发SKU数；理论缺口(件)；建议补货量(件)；覆盖率；在途库存(件)；库存水位(件)
操作：导出补货计划","MUST 仍按自然周生成；SHOULD 在“方法/口径”区提示“月度按自然日拆分”
[MUST] 输入为标准JSON（可解析）且 intent=补货计划
[MUST] 输出为补货计划明细（日粒度）
[MUST] 输出列包含={request_id, record_id, 归属组织, sku, 物理仓, 巡检日期, 即时库存, 在途库存, 可用库存, 库存水位, ROP（日）, 目标库存（日）, 理论缺口, 止拨后可分配量, 建议补货量, 实际补货量, 触发状态/原因, 预计到达, 备注}",,,,,,,,,,
INT-043,意图识别,补货计划意图识别,标准输入,生成本周补货计划,,,"解析结果JSON: {""intent"": ""补货计划"", ""time_window"": ""this_week"", ""include_in_transit"": true, ""rounding_method"": ""box_up"", ""version"": ""daily_refresh""}",,,"[MUST] 意图=补货计划
[MUST] 时间窗=本周（this_week）
[SHOULD] 计入在途=是（true）
[SHOULD] 取整=按箱向上
[SHOULD] 版本=日更（daily_refresh）",,,,,,,,,,
INT-044,意图识别,补货计划意图识别,今日巡检,今天的补货计划是什么？,,,"解析结果JSON: {""intent"": ""补货计划"", ""inspection_date"": ""today"", ""version"": ""daily_refresh""}",,,"[MUST] 意图=补货计划
[MUST] 巡检日期=today
[SHOULD] 版本=日更（daily_refresh）",,,,,,,,,,
INT-049,意图识别,补货计划意图识别,今日巡检+过滤触发行,只看今天触发的补货,,,"解析结果JSON: {""intent"": ""补货计划"", ""inspection_date"": ""today"", ""trigger_condition"": ""inventory_water_level<rop_day""}",,,"[MUST] 意图=补货计划
[MUST] 巡检日期=today
[MUST] 触发条件=库存水位<ROP（日）",,,,,,,,,,
INT-047,意图识别,补货计划意图识别,单仓+单SKU,只看北京仓，A001的的补货,,,"解析结果JSON: {""intent"": ""补货计划"", ""warehouse"": ""北京仓""}",,,"[MUST] 意图=补货计划
[MUST] 仓=北京仓",,,,,,,,,,
INT-048,意图识别,补货计划意图识别,多仓+多SKU,北京/成都 两仓 A001/A002 的补货,,,"解析结果JSON: {""intent"": ""补货计划"", ""warehouse_list"": [""北京仓"", ""成都仓""], ""sku_list"": [""A001"", ""A002""]}",,,"[MUST] 意图=补货计划
[MUST] 仓集合={北京仓, 成都仓}
[MUST] SKU集合={A001, A002}",,,,,,,,,,
,意图识别,补货计划意图识别,调整数量,,,,,,,,,,,,,,,,,
