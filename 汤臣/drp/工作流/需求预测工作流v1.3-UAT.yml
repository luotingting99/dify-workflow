app:
  description: ''
  icon: ğŸ¤–
  icon_background: '#FFEAD5'
  mode: workflow
  name: éœ€æ±‚é¢„æµ‹å·¥ä½œæµv1.3-UAT
  use_icon_as_answer_icon: false
dependencies: []
kind: app
version: 0.4.0
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: start
        targetType: agent
      id: 1761221121698-source-1761221127988-target
      source: '1761221121698'
      sourceHandle: source
      target: '1761221127988'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: agent
        targetType: end
      id: 1761221127988-source-1761221135331-target
      source: '1761221127988'
      sourceHandle: source
      target: '1761221135331'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: ''
        selected: false
        title: å¼€å§‹
        type: start
        variables:
        - label: query
          max_length: 1024
          options: []
          required: true
          type: paragraph
          variable: query
        - default: ''
          hint: ''
          label: time_window
          max_length: 256
          options: []
          placeholder: ''
          required: true
          type: text-input
          variable: time_window
      height: 114
      id: '1761221121698'
      position:
        x: 80
        y: 282
      positionAbsolute:
        x: 80
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        agent_parameters:
          instruction:
            type: constant
            value: '## Roleï¼ˆè§’è‰²ï¼‰& Taskï¼ˆä»»åŠ¡ï¼‰

              ä½ æ˜¯éœ€æ±‚é¢„æµ‹æ•°æ®æŸ¥è¯¢åˆ†æåŠ©æ‰‹ã€‚èŒè´£ï¼š

              - ç†è§£ç”¨æˆ·æŸ¥è¯¢æ„å›¾

              - å°†ç”¨æˆ·éœ€æ±‚æ‹†è§£ä¸ºå¯æ‰§è¡Œçš„æŸ¥è¯¢æ­¥éª¤

              - ä»mart_forecast_enrichedæŸ¥è¯¢æ•°æ®

              - è¿”å›åŸå§‹æŸ¥è¯¢ç»“æœ


              ## Core Principlesï¼ˆæ ¸å¿ƒåŸåˆ™ï¼‰

              1. é»˜è®¤å¯¼å‡ºï¼šæ¯æ¬¡æŸ¥è¯¢é»˜è®¤éœ€è¦å¯¼å‡ºæ˜ç»†CSVæ–‡ä»¶ï¼ˆè®¾ç½®export_oss=true, export_format=csvï¼‰ - å¯¼å‡ºæ–‡ä»¶åç§°ä¸ºï¼šéœ€æ±‚é¢„æµ‹_æŸ¥è¯¢æ—¶é—´ï¼ˆå¹´æœˆæ—¥æ—¶åˆ†ç§’ï¼‰.csv
              - å­—æ®µåå¿…é¡»ä½¿ç”¨ä¸­æ–‡åˆ«åï¼ˆAS ä¸­æ–‡åç§°ï¼‰ - Final Answerä¸­çš„CSVä¸‹è½½é“¾æ¥å¿…é¡»ä½¿ç”¨å·¥å…·å“åº”é‡Œçš„http_url

              2. åº“å­˜å•ä½ç»Ÿä¸€ï¼šæŸ¥è¯¢ç»“æœã€å¯¼å‡ºæ˜ç»†ã€æ€»ç»“ä¸­çš„åº“å­˜ä¸æ•°é‡ç±»å­—æ®µä¸€å¾‹ä½¿ç”¨PCSä½œä¸ºå•ä½


              ## Contextï¼ˆä¸Šä¸‹æ–‡å¤„ç†ï¼‰

              ### è¾“å…¥å‚æ•°

              - time_window: æ—¶é—´çª—å£ï¼Œæ ¼å¼YYYY-MM-DD~YYYY-MM-DDï¼ˆå¿…å¡«ï¼‰ - è‹¥ç”¨æˆ·è¾“å…¥çš„æ˜¯æŸä¸€å¤©çš„æ—¥æœŸï¼Œåˆ™æ‰¾åˆ°è¿™ä¸€å¤©æ‰€åœ¨çš„å‘¨ï¼Œtime_windowä¸ºè¿™ä¸€å‘¨çš„å¼€å§‹æ—¥æœŸå’Œç»“æŸæ—¥æœŸ


              ### æ•°æ®æº

              table: mart_forecast_enriched


              ### é»˜è®¤è¿‡æ»¤é¡¹

              - scenario_id=''REAL'' - algorithm_used=''moving_average''ï¼ˆè‹¥ç”¨æˆ·æœªæ˜ç¡®æŒ‡å®šç®—æ³•ï¼Œé»˜è®¤æŸ¥è¯¢moving_averageç®—æ³•çš„é¢„æµ‹ç»“æœï¼‰

              ### å­—æ®µå®šä¹‰ä¸å¯¼å‡ºæ˜ å°„

              | å­—æ®µåç§° | å­—æ®µç±»å‹ | ä¸­æ–‡åˆ«å | æ˜¯å¦å¯¼å‡º |

              |----------|----------|----------|----------|

              | forecast_week_start_date | DATE | é¢„æµ‹å‘¨å¼€å§‹æ—¥æœŸ | æ˜¯ |

              | forecast_week_end_date | DATE | é¢„æµ‹å‘¨ç»“æŸæ—¥æœŸ | æ˜¯ |

              | product_long_code | VARCHAR | SKUç¼–ç  | æ˜¯ |

              | product_name | VARCHAR | SKUåç§° | æ˜¯ |

              | expected_physical_warehouse | VARCHAR | é¢„è®¡å‘è´§ç‰©ç†ä»“ | æ˜¯ |

              | expected_wh_sales_qty | DECIMAL | é¢„è®¡å‘è´§ä»“é”€å”®é‡ | å¦ |

              | forecast_qty | DECIMAL(18,2) | éœ€æ±‚é¢„æµ‹æ•°é‡ | æ˜¯ |

              | algorithm_used | VARCHAR | é¢„æµ‹ç®—æ³• | æ˜¯ |

              | abs_forecast_error | DECIMAL | é¢„æµ‹è¯¯å·®ç»å¯¹å€¼ | å¦ |

              | forecast_error | DECIMAL | é¢„æµ‹è¯¯å·® | å¦ |

              | sigma_pp | DECIMAL | é¢„æµ‹è¯¯å·®æ ‡å‡†å·®ï¼ˆä¿æŠ¤æœŸï¼‰ | å¦ |

              | is_cross_month_week | BOOLEAN | è·¨æœˆå‘¨æ ‡è®° | æ˜¯ |

              | scenario_id | VARCHAR | åœºæ™¯ID | å¦ |



              ### DuckDBè¯­æ³•

              - ç©ºå€¼å¤„ç†ï¼šCOALESCE()

              - å…è®¸ï¼šWITH CTEã€COUNT(DISTINCT)ã€çª—å£å‡½æ•°

              - ç¦æ­¢ï¼šNVLã€DECODEã€TO_CHARï¼ˆOracleæ–¹è¨€ï¼‰

              - å¯¼å‡ºé™åˆ¶ï¼šä½¿ç”¨å·¥å…·å‚æ•°limitè€ŒéSQL LIMIT


              ## CoTï¼ˆæ€ç»´é“¾ - å†…éƒ¨æ‰§è¡Œï¼‰

              æ‰§è¡Œæ­¥éª¤ï¼š

              1. åˆ†æç”¨æˆ·æ„å›¾ï¼š - è¯†åˆ«ç”¨æˆ·æ„å›¾ï¼šæ±‡æ€»æŸ¥è¯¢ã€æ˜ç»†æŸ¥è¯¢ã€TopKæŸ¥è¯¢ - ç¡®å®šéœ€è¦çš„æ´å¯Ÿçš„æ•°æ®ç»´åº¦ - åˆ¤æ–­ç”¨æˆ·æ˜¯å¦æ˜ç¡®æŒ‡å®šç®—æ³•ï¼Œè‹¥æœªæŒ‡å®šåˆ™é»˜è®¤ä½¿ç”¨algorithm_used=''moving_average''

              2. æ‹†è§£æŸ¥è¯¢æ­¥éª¤ - æ ¹æ®ç”¨æˆ·éœ€æ±‚è§„åˆ’1-Nä¸ªæŸ¥è¯¢æ­¥éª¤ - æ¯ä¸ªæ­¥éª¤æ˜ç¡®ï¼šæŸ¥è¯¢ç›®æ ‡ã€è¿‡æ»¤æ¡ä»¶ï¼ˆå«ç®—æ³•é»˜è®¤å€¼ï¼‰ã€è¾“å‡ºå­—æ®µ - è§„åˆ’ä¸­å¿…é¡»åŒ…å«æ˜ç»†å¯¼å‡ºæ­¥éª¤

              3. æ‰§è¡ŒæŸ¥è¯¢ - æŒ‰è§„åˆ’æ­¥éª¤è°ƒç”¨duckdb_queryå·¥å…·ï¼Œè¿”å›JSONç»“æœ - æœ€åä¸€æ­¥æŸ¥è¯¢å¿…é¡»åŒ…å«CSVå¯¼å‡º - è¿”å›æŸ¥è¯¢ç»“æœ

              4. æ€»ç»“è¾“å‡º - æ ¹æ®æŸ¥è¯¢ç»“æœç”Ÿæˆæ€»ç»“æ€§è¾“å‡ºï¼Œä»…è¾“å‡ºæœ€ç»ˆç­”æ¡ˆ - ä¸è¾“å‡ºä»»ä½•ä¸­é—´æ¨ç†è¿‡ç¨‹ - æœ€ç»ˆç­”æ¡ˆå¿…é¡»åŒ…å«ï¼šæŸ¥è¯¢èŒƒå›´ã€æ•°æ®ç»Ÿè®¡æ‘˜è¦ã€æ˜ç»†é¢„è§ˆã€æ´å¯Ÿã€CSVä¸‹è½½é“¾æ¥


              ## Output Specï¼ˆè¾“å‡ºè§„èŒƒï¼‰ æ‰€æœ‰æŸ¥è¯¢å®Œæˆåï¼Œä½¿ç”¨markdownæ ¼å¼è¾“å‡ºæœ€ç»ˆç­”æ¡ˆï¼Œå¿…é¡»åŒ…å«ï¼šæŸ¥è¯¢èŒƒå›´ã€æ•°æ®ç»Ÿè®¡æ‘˜è¦ã€æ˜ç»†é¢„è§ˆã€æ´å¯Ÿã€CSVä¸‹è½½é“¾æ¥
              - æŸ¥è¯¢èŒƒå›´ï¼šæ—¶é—´ã€SKUã€ä»“åº“ã€ç®—æ³•=moving_averageï¼ˆæˆ–ç”¨æˆ·æŒ‡å®šç®—æ³•ï¼‰ - æ•°æ®ç»Ÿè®¡æ‘˜è¦ï¼šæ€»é¢„æµ‹é‡ã€è¦†ç›–SKUæ•°ã€è¦†ç›–ä»“æ•°ã€è®°å½•è¡Œæ•°ã€æ—¥å‡é¢„æµ‹é‡
              - æ˜ç»†æ•°æ®ï¼ŒæŒ‰éœ€æ±‚é¢„æµ‹æ•°é‡ä»é«˜è‡³ä½æ’åºï¼Œæœ€å¤šå±•ç¤ºå‰10æ¡æ•°æ®ï¼Œä»…å±•ç¤ºSKUç¼–ç ã€SKUåç§°ã€é¢„è®¡å‘è´§ç‰©ç†ä»“ã€éœ€æ±‚é¢„æµ‹æ•°é‡ã€‚ - å…³é”®æ´å¯Ÿï¼šè‡³å°‘3æ¡ï¼Œæœ€å¤š5æ¡ï¼Œéœ€è¦†ç›–ï¼šé£é™©ã€è¡ŒåŠ¨å»ºè®®ã€‚
              - å¦‚æœ‰éœ€è¦ï¼Œå¯ä»¥è¾“å‡ºvega-liteå›¾è¡¨ï¼ˆä»…ä¸€æ¬¡ï¼Œä½¿ç”¨```vega-lite```æ ‡è®°ï¼Œæ ‡é¢˜ä¸ºâ€œéœ€æ±‚é¢„æµ‹ç»Ÿè®¡å›¾â€ï¼‰ - CSVæ–‡ä»¶ä¸‹è½½é“¾æ¥ï¼ˆå¦‚æœ‰å¯¼å‡ºï¼Œä½¿ç”¨å·¥å…·å“åº”ä¸­çš„
              http_urlï¼‰



              ## Few-Shotï¼ˆç¤ºä¾‹ï¼‰

              ### ç¤ºä¾‹1ï¼šåŸºç¡€æŸ¥è¯¢ï¼ˆæ— SKU/ä»“åº“è¿‡æ»¤ï¼‰

              ç”¨æˆ·æŸ¥è¯¢ï¼š"2025å¹´6æœˆ30æ—¥åˆ°2025å¹´7æœˆ6æ—¥çš„éœ€æ±‚é¢„æµ‹æƒ…å†µ"

              è¾“å…¥ï¼š{"time_window":"2025-06-30~2025-07-06", "query":"2025å¹´6æœˆ30æ—¥åˆ°2025å¹´7æœˆ6æ—¥çš„éœ€æ±‚é¢„æµ‹æƒ…å†µ"}


              æ­¥éª¤æ‹†è§£ï¼š - ç”¨æˆ·éœ€è¦æ•´ä½“ç»Ÿè®¡ â†’ éœ€è¦å…¨å±€æ±‡æ€»ã€ä»“åº“ç»´åº¦æ±‡æ€»æ•°æ®åŠæ˜ç»†æ•°æ® - ç”¨æˆ·æœªæŒ‡å®šç®—æ³• â†’ é»˜è®¤ä½¿ç”¨algorithm_used=''moving_average''
              - éœ€è¦å¯¼å‡ºæ˜ç»†ä¾›è¿›ä¸€æ­¥åˆ†æ


              æ‰§è¡Œæ­¥éª¤ï¼š

              æ­¥éª¤1ï¼šè°ƒç”¨duckdb_queryå·¥å…·ï¼ŒæŸ¥è¯¢å…¨å±€æ±‡æ€»æ•°æ®ï¼ˆWHEREæ¡ä»¶åŒ…å«algorithm_used=''moving_average''ï¼‰

              æ­¥éª¤2ï¼šè°ƒç”¨duckdb_queryå·¥å…·ï¼ŒæŸ¥è¯¢é¢„æµ‹æ•°é‡TOP10çš„æ˜ç»†æ•°æ®

              æ­¥éª¤3ï¼šè°ƒç”¨duckdb_queryå·¥å…·ï¼Œå¯¼å‡ºæŸ¥è¯¢èŒƒå›´å†…çš„æ˜ç»†æ•°æ® - å·¥å…·å‚æ•°: export_oss=true, export_format=csv


              æ­¥éª¤4ï¼šæ€»ç»“è¾“å‡ºFinal Answerï¼ˆæŸ¥è¯¢èŒƒå›´ã€æ•°æ®ç»Ÿè®¡æ‘˜è¦ã€æ˜ç»†é¢„è§ˆã€æ´å¯Ÿã€CSVä¸‹è½½é“¾æ¥ï¼‰

              æœ€ç»ˆè¾“å‡ºç¤ºä¾‹ï¼ˆFinal Answerï¼‰ï¼š

              ## æŸ¥è¯¢ç»“æœæ€»ç»“ ### æŸ¥è¯¢èŒƒå›´ - æ—¶é—´ï¼š2025-06-30~2025-07-06 - SKUï¼šå…¨éƒ¨ - ä»“åº“ï¼šå…¨éƒ¨ - ç®—æ³•ï¼šmoving_average
              ### æ•°æ®ç»Ÿè®¡æ‘˜è¦ - æ€»é¢„æµ‹é‡ï¼š130,827.93 PCS - è¦†ç›–SKUæ•°ï¼š90 - è¦†ç›–ä»“æ•°ï¼š4 - è®°å½•è¡Œæ•°ï¼š360 - æ—¥å‡é¢„æµ‹é‡ï¼š46,724.26
              PCS ### æ˜ç»†é¢„è§ˆï¼ˆå‰10æ¡ï¼‰

              | SKUç¼–ç  | SKUåç§° | é¢„è®¡å‘è´§ç‰©ç†ä»“ | éœ€æ±‚é¢„æµ‹æ•°é‡ | | --- | --- | --- | --- | | A.A.001.AA0010021A
              | æ±¤è‡£å€å¥é‡‘è£…è›‹ç™½ç²‰ç¤¼ç›’ | æˆéƒ½ä»“ | 4,936.50 | | ... | ... | ... | ... | ### å…³é”®æ´å¯Ÿ
              1. å»ºè®®ä¼˜å…ˆä¿éšœç æµ·ä»“åº“å­˜å……è¶³ ### å¯¼å‡ºæ•°æ® CSVæ–‡ä»¶ï¼š[ä¸‹è½½é¢„æµ‹æ˜ç»†ï¼ˆCSVï¼‰](http://example.com/http_url)
              æœ‰æ•ˆæœŸï¼š1å°æ—¶ æ•°æ®è¡Œæ•°ï¼š12


              ### ç¤ºä¾‹2ï¼šç‰¹å®šSKUä¸ä»“åº“ï¼ˆå«ç®—æ³•è¿‡æ»¤ï¼‰

              ç”¨æˆ·æŸ¥è¯¢ï¼š"æŸ¥è¯¢A.A.001.AA0010021åœ¨æˆéƒ½ä»“2025å¹´6æœˆ30æ—¥åˆ°2025å¹´7æœˆ6æ—¥çš„ç§»åŠ¨å¹³å‡ç®—æ³•é¢„æµ‹æ˜ç»†"

              è¾“å…¥ï¼š{"time_window":"2025-06-30~2025-07-06", "query":"æŸ¥è¯¢A.A.001.AA0010021åœ¨æˆéƒ½ä»“2025å¹´6æœˆ30æ—¥åˆ°2025å¹´7æœˆ6æ—¥çš„ç§»åŠ¨å¹³å‡ç®—æ³•é¢„æµ‹æ˜ç»†"}


              æ­¥éª¤æ‹†è§£ï¼š - ç”¨æˆ·å…³æ³¨å•ä¸€SKU+ä»“åº“ï¼Œå¹¶æŒ‡å®šç®—æ³• â†’ éœ€è¦å¸¦è¿‡æ»¤æ¡ä»¶çš„æ±‡æ€»ä¸ä»“ç»´åº¦æ¦‚è§ˆ - æ˜ç»†ç”¨äºæ ¸å¯¹å…·ä½“é¢„æµ‹è®°å½• â†’ ä»éœ€å¯¼å‡ºCSV


              æ‰§è¡Œæ­¥éª¤ï¼š æ­¥éª¤1ï¼šè°ƒç”¨duckdb_queryå·¥å…·ï¼ŒæŸ¥è¯¢è¿‡æ»¤åçš„KPIæ±‡æ€»æ•°æ®ï¼ˆå«total_forecastã€row_countç­‰ï¼‰

              æ­¥éª¤2ï¼šè°ƒç”¨duckdb_queryå·¥å…·ï¼Œå¯¼å‡ºè¿‡æ»¤åçš„æ˜ç»†æ•°æ® - å·¥å…·å‚æ•°ï¼šexport_oss=true, export_format=csv

              æ­¥éª¤3ï¼šæ€»ç»“è¾“å‡ºFinal Answerï¼ˆæŸ¥è¯¢èŒƒå›´ã€å…³é”®æŒ‡æ ‡ã€æ˜ç»†é¢„è§ˆã€æ´å¯Ÿã€CSVä¸‹è½½é“¾æ¥ï¼‰

              æœ€ç»ˆè¾“å‡ºç¤ºä¾‹ï¼ˆFinal Answerï¼‰ï¼š

              ## æŸ¥è¯¢ç»“æœæ€»ç»“ ### æŸ¥è¯¢èŒƒå›´ - æ—¶é—´ï¼š2025-06-30~2025-07-06 - SKUï¼šA.A.001.AA0010021
              - ä»“åº“ï¼šæˆéƒ½ä»“ - ç®—æ³•ï¼šmoving_average ### æ•°æ®ç»Ÿè®¡æ‘˜è¦ - æ€»é¢„æµ‹é‡ï¼š4,560.00 PCS - è¦†ç›–SKUæ•°ï¼š1
              - è¦†ç›–ä»“æ•°ï¼š1 - è®°å½•è¡Œæ•°ï¼š12 - æ—¥å‡é¢„æµ‹é‡ï¼š162.86 PCS ### æ˜ç»†é¢„è§ˆï¼ˆå‰10æ¡ï¼‰

              | SKUç¼–ç  | SKUåç§° | é¢„è®¡å‘è´§ç‰©ç†ä»“ | éœ€æ±‚é¢„æµ‹æ•°é‡ | | --- | --- | --- | --- | | A.A.001.AA0010021
              | æ±¤è‡£å€å¥é‡‘è£…è›‹ç™½ç²‰ç¤¼ç›’ | æˆéƒ½ä»“ | 4,560.00 | | ... | ... | ... | ... | ### å…³é”®æ´å¯Ÿ
              1. å»ºè®®æŒç»­ç›‘æ§å®é™…é”€é‡ä¸é¢„æµ‹åå·® ### å¯¼å‡ºæ•°æ® CSVæ–‡ä»¶ï¼š[ä¸‹è½½é¢„æµ‹æ˜ç»†ï¼ˆCSVï¼‰](http://example.com/http_url)
              æœ‰æ•ˆæœŸï¼š1å°æ—¶ æ•°æ®è¡Œæ•°ï¼š12



              ### ç¤ºä¾‹3ï¼šTopK SKU æŸ¥è¯¢

              ç”¨æˆ·æŸ¥è¯¢ï¼š"è¯·ç»™æˆ‘2025å¹´6æœˆ30æ—¥åˆ°2025å¹´7æœˆ6æ—¥é¢„æµ‹é‡Top10çš„SKUåŠæ˜ç»†"

              è¾“å…¥ï¼š{"time_window":"2025-06-30~2025-07-06", "query":"è¯·ç»™æˆ‘2025å¹´6æœˆ30æ—¥åˆ°2025å¹´7æœˆ6æ—¥é¢„æµ‹é‡Top10çš„SKUåŠæ˜ç»†"}


              æ­¥éª¤æ‹†è§£ï¼š - ç”¨æˆ·å…³æ³¨TopKåˆ—è¡¨ â†’ éœ€è¦æŒ‰ç…§é¢„æµ‹é‡æ’åºå¹¶æˆªå–å‰10ä¸ªSKU - ä»éœ€æä¾›Top10ä»“ç»´åº¦å æ¯”ä¸å¯ä¸‹è½½æ˜ç»†


              æ‰§è¡Œæ­¥éª¤ï¼š æ­¥éª¤1ï¼šè°ƒç”¨duckdb_queryå·¥å…·ï¼ŒæŸ¥è¯¢Top10 SKUçš„èšåˆç»“æœï¼ˆSUM(forecast_qty)å¹¶æŒ‰é™åºæ’åºã€é™åˆ¶10æ¡ï¼‰

              æ­¥éª¤2ï¼šè°ƒç”¨duckdb_queryå·¥å…·ï¼Œå¯¼å‡ºTop10 SKUçš„æ˜ç»†æ•°æ® - å·¥å…·å‚æ•°ï¼šexport_oss=true, export_format=csv

              æ­¥éª¤3ï¼šæ€»ç»“è¾“å‡ºFinal Answerï¼ˆåŒ…å«Top10åˆ—è¡¨ã€æ˜ç»†é¢„è§ˆã€å…³é”®æ´å¯Ÿã€CSVä¸‹è½½é“¾æ¥ï¼‰

              æœ€ç»ˆè¾“å‡ºç¤ºä¾‹ï¼ˆFinal Answerï¼‰ï¼š

              ## æŸ¥è¯¢ç»“æœæ€»ç»“ ### æŸ¥è¯¢èŒƒå›´ - æ—¶é—´ï¼š2025-06-30~2025-07-06 - SKUï¼šTop10 - ä»“åº“ï¼šALL -
              ç®—æ³•ï¼šmoving_average ### æ•°æ®ç»Ÿè®¡æ‘˜è¦ - Top10æ€»é¢„æµ‹é‡ï¼š520,430.50 PCS ### æ˜ç»†é¢„è§ˆï¼ˆå‰10æ¡ï¼‰
              | SKUç¼–ç  | SKUåç§° | é¢„è®¡å‘è´§ç‰©ç†ä»“ | éœ€æ±‚é¢„æµ‹æ•°é‡ | |---|---|---|---| |A.A.001.AA001
              | å•†å“A | ç æµ·ä»“ | 21,300.00 | ### å…³é”®æ´å¯Ÿ 1. å»ºè®®å¯¹Top10 SKUè®¾ç«‹ä¸“é¡¹åº“å­˜ç›‘æ§é¢„è­¦ ### å¯¼å‡ºæ•°æ®
              CSVæ–‡ä»¶ï¼š[ä¸‹è½½é¢„æµ‹æ˜ç»†ï¼ˆCSVï¼‰](http://example.com/http_url) æœ‰æ•ˆæœŸï¼š1å°æ—¶ æ•°æ®è¡Œæ•°ï¼š12

              '
          maximum_iterations:
            type: constant
            value: 10
          model:
            type: constant
            value:
              completion_params: {}
              mode: chat
              model: qwen3-max
              model_type: llm
              provider: langgenius/tongyi/tongyi
              type: model-selector
          query:
            type: constant
            value: "{\n  \"time_window\": \"{{#1761221121698.time_window#}}\",\n \
              \ \"query\": \"{{#1761221121698.query#}}\"\n}\n"
          tools:
            type: constant
            value:
            - enabled: true
              extra:
                description: æ‰§è¡Œ DuckDB æŸ¥è¯¢ï¼Œè¿”å› JSON ç»“æœï¼›å¯é€‰å¯¼å‡ºåˆ° OSSã€‚å‚æ•°ï¼šsql(SQL æ–‡æœ¬)ï¼Œdb_path(å¯é€‰)ï¼Œlimit(å¯é€‰è¡Œæ•°é™åˆ¶)ï¼Œexport_oss(æ˜¯å¦å¯¼å‡ºï¼Œé»˜è®¤
                  false)ï¼Œexport_format(å¯¼å‡ºæ ¼å¼ï¼Œé»˜è®¤ csv)ï¼Œexport_filename(å¯¼å‡ºæ–‡ä»¶å)ï¼Œpresign_seconds(URL
                  æœ‰æ•ˆæœŸï¼Œé»˜è®¤ 3600)ã€‚è¿”å›å€¼ï¼š{db, columns, rows, rowcount, duration_ms, export}ã€‚
              parameters:
                db_path:
                  auto: 1
                  value: null
                export_filename:
                  auto: 1
                  value: null
                export_format:
                  auto: 1
                  value: null
                export_oss:
                  auto: 1
                  value: null
                limit:
                  auto: 1
                  value: null
                presign_seconds:
                  auto: 1
                  value: null
                sql:
                  auto: 1
                  value: null
              provider_name: orchestrax-mcp
              provider_show_name: AIè°ƒæ‹¨MCP
              schemas:
              - auto_generate: null
                default: null
                form: llm
                human_description:
                  zh_Hans: ''
                label:
                  en_US: sql
                  ja_JP: sql
                  pt_BR: sql
                  zh_Hans: sql
                llm_description: ''
                max: null
                min: null
                name: sql
                options: []
                placeholder: null
                precision: null
                required: true
                scope: null
                template: null
                type: string
              - auto_generate: null
                default: null
                form: llm
                human_description:
                  zh_Hans: ''
                label:
                  en_US: db_path
                  ja_JP: db_path
                  pt_BR: db_path
                  zh_Hans: db_path
                llm_description: ''
                max: null
                min: null
                name: db_path
                options: []
                placeholder: null
                precision: null
                required: false
                scope: null
                template: null
                type: string
              - auto_generate: null
                default: null
                form: llm
                human_description:
                  zh_Hans: ''
                label:
                  en_US: limit
                  ja_JP: limit
                  pt_BR: limit
                  zh_Hans: limit
                llm_description: ''
                max: null
                min: null
                name: limit
                options: []
                placeholder: null
                precision: null
                required: false
                scope: null
                template: null
                type: string
              - auto_generate: null
                default: null
                form: llm
                human_description:
                  zh_Hans: ''
                label:
                  en_US: export_oss
                  ja_JP: export_oss
                  pt_BR: export_oss
                  zh_Hans: export_oss
                llm_description: ''
                max: null
                min: null
                name: export_oss
                options: []
                placeholder: null
                precision: null
                required: false
                scope: null
                template: null
                type: boolean
              - auto_generate: null
                default: null
                form: llm
                human_description:
                  zh_Hans: ''
                label:
                  en_US: export_format
                  ja_JP: export_format
                  pt_BR: export_format
                  zh_Hans: export_format
                llm_description: ''
                max: null
                min: null
                name: export_format
                options: []
                placeholder: null
                precision: null
                required: false
                scope: null
                template: null
                type: string
              - auto_generate: null
                default: null
                form: llm
                human_description:
                  zh_Hans: ''
                label:
                  en_US: export_filename
                  ja_JP: export_filename
                  pt_BR: export_filename
                  zh_Hans: export_filename
                llm_description: ''
                max: null
                min: null
                name: export_filename
                options: []
                placeholder: null
                precision: null
                required: false
                scope: null
                template: null
                type: string
              - auto_generate: null
                default: 3600
                form: llm
                human_description:
                  zh_Hans: ''
                label:
                  en_US: presign_seconds
                  ja_JP: presign_seconds
                  pt_BR: presign_seconds
                  zh_Hans: presign_seconds
                llm_description: ''
                max: null
                min: null
                name: presign_seconds
                options: []
                placeholder: null
                precision: null
                required: false
                scope: null
                template: null
                type: number
              settings: {}
              tool_description: æ‰§è¡Œ DuckDB æŸ¥è¯¢ï¼Œè¿”å› JSON ç»“æœï¼›å¯é€‰å¯¼å‡ºåˆ° OSSã€‚
              tool_label: duckdb_query
              tool_name: duckdb_query
              type: mcp
            - enabled: false
              extra:
                description: "\n        æ‰§è¡Œ DuckDB çš„è¡Œçº§æ›´æ–°è¯­å¥ï¼Œä»…æ”¯æŒ UPDATEã€‚\n        "
              parameters:
                autocommit:
                  auto: 1
                  value: null
                db_path:
                  auto: 1
                  value: null
                sql:
                  auto: 1
                  value: null
              provider_name: orchestrax-mcp
              provider_show_name: AIè°ƒæ‹¨MCP
              schemas:
              - auto_generate: null
                default: null
                form: llm
                human_description:
                  en_US: ''
                  ja_JP: ''
                  pt_BR: ''
                  zh_Hans: ''
                label:
                  en_US: sql
                  ja_JP: sql
                  pt_BR: sql
                  zh_Hans: sql
                llm_description: ''
                max: null
                min: null
                name: sql
                options: []
                placeholder: null
                precision: null
                required: true
                scope: null
                template: null
                type: string
              - auto_generate: null
                default: null
                form: llm
                human_description:
                  en_US: ''
                  ja_JP: ''
                  pt_BR: ''
                  zh_Hans: ''
                label:
                  en_US: db_path
                  ja_JP: db_path
                  pt_BR: db_path
                  zh_Hans: db_path
                llm_description: ''
                max: null
                min: null
                name: db_path
                options: []
                placeholder: null
                precision: null
                required: false
                scope: null
                template: null
                type: string
              - auto_generate: null
                default: null
                form: llm
                human_description:
                  en_US: ''
                  ja_JP: ''
                  pt_BR: ''
                  zh_Hans: ''
                label:
                  en_US: autocommit
                  ja_JP: autocommit
                  pt_BR: autocommit
                  zh_Hans: autocommit
                llm_description: ''
                max: null
                min: null
                name: autocommit
                options: []
                placeholder: null
                precision: null
                required: false
                scope: null
                template: null
                type: boolean
              settings: {}
              tool_description: "\n        æ‰§è¡Œ DuckDB çš„è¡Œçº§æ›´æ–°è¯­å¥ï¼Œä»…æ”¯æŒ UPDATEã€‚\n        "
              tool_label: duckdb_update
              tool_name: duckdb_update
              type: mcp
        agent_strategy_label: ReAct
        agent_strategy_name: ReAct
        agent_strategy_provider_name: langgenius/agent/agent
        desc: ''
        meta:
          minimum_dify_version: null
          version: 0.0.2
        output_schema: null
        plugin_unique_identifier: langgenius/agent:0.0.20@eafd74ef989a085162e2de35b8b3ada3aab65430eefb10c966399d02327cd679
        selected: false
        title: Agent
        type: agent
        version: '2'
      height: 196
      id: '1761221127988'
      position:
        x: 384
        y: 282
      positionAbsolute:
        x: 384
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1761221127988'
          - text
          value_type: string
          variable: output
        selected: false
        title: ç»“æŸ
        type: end
      height: 88
      id: '1761221135331'
      position:
        x: 1067.2787938775723
        y: 282
      positionAbsolute:
        x: 1067.2787938775723
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    viewport:
      x: -488.2853980518988
      y: 156.08838205423032
      zoom: 0.8586245949256739
  rag_pipeline_variables: []
