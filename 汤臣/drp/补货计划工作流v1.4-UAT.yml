app:
  description: ''
  icon: ğŸ¤–
  icon_background: '#FFEAD5'
  mode: workflow
  name: è¡¥è´§è®¡åˆ’å·¥ä½œæµv1.4-UAT
  use_icon_as_answer_icon: false
dependencies: []
kind: app
version: 0.4.0
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: start
        targetType: agent
      id: 1761221121698-source-1761221127988-target
      source: '1761221121698'
      sourceHandle: source
      target: '1761221127988'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: agent
        targetType: end
      id: 1761221127988-source-1761221135331-target
      source: '1761221127988'
      sourceHandle: source
      target: '1761221135331'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: ''
        selected: false
        title: å¼€å§‹
        type: start
        variables:
        - label: query
          max_length: 1024
          options: []
          required: true
          type: paragraph
          variable: query
        - default: ''
          hint: ''
          label: time_window
          max_length: 256
          options: []
          placeholder: ''
          required: true
          type: text-input
          variable: time_window
      height: 114
      id: '1761221121698'
      position:
        x: 80
        y: 282
      positionAbsolute:
        x: 80
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        agent_parameters:
          instruction:
            type: constant
            value: '## Roleï¼ˆè§’è‰²ï¼‰& Taskï¼ˆä»»åŠ¡ï¼‰

              ä½ æ˜¯è¡¥è´§è®¡åˆ’æ•°æ®æŸ¥è¯¢åˆ†æåŠ©æ‰‹ã€‚èŒè´£ï¼š

              - ç†è§£ç”¨æˆ·æŸ¥è¯¢æ„å›¾

              - å°†ç”¨æˆ·éœ€æ±‚æ‹†è§£ä¸ºå¯æ‰§è¡Œçš„æŸ¥è¯¢æ­¥éª¤

              - ä»mart_replenishment_planæŸ¥è¯¢æ•°æ®

              - è¿”å›åŸå§‹æŸ¥è¯¢ç»“æœ


              ## Core Principlesï¼ˆæ ¸å¿ƒåŸåˆ™ï¼‰

              1. é»˜è®¤å¯¼å‡ºï¼šæ¯æ¬¡æŸ¥è¯¢é»˜è®¤éœ€è¦å¯¼å‡ºæ˜ç»†CSVæ–‡ä»¶ï¼ˆè®¾ç½®export_oss=true, export_format=csv, presign_seconds=3600,
              limit=10000ï¼‰ - å¯¼å‡ºæ–‡ä»¶åç§°ä¸ºï¼šè¡¥è´§è®¡åˆ’_æŸ¥è¯¢æ—¶é—´.csv - å­—æ®µåå¿…é¡»ä½¿ç”¨ä¸­æ–‡åˆ«åï¼ˆAS ä¸­æ–‡åç§°ï¼‰ - Final
              Answerä¸­çš„CSVä¸‹è½½é“¾æ¥å¿…é¡»ä½¿ç”¨å·¥å…·å“åº”é‡Œçš„http_url

              2. åº“å­˜å•ä½ç»Ÿä¸€ï¼šæŸ¥è¯¢ç»“æœã€å¯¼å‡ºæ˜ç»†ã€æ€»ç»“ä¸­çš„åº“å­˜ä¸æ•°é‡ç±»å­—æ®µä¸€å¾‹ä½¿ç”¨PCSä½œä¸ºå•ä½


              ## Contextï¼ˆä¸Šä¸‹æ–‡å¤„ç†ï¼‰

              ### è¾“å…¥å‚æ•°

              - time_window: æ—¶é—´çª—å£ï¼ˆå¿…å¡«ï¼‰


              ### æ•°æ®æº

              table: mart_replenishment_plan


              ### å¼ºåˆ¶è¿‡æ»¤é¡¹

              - scenario_id=''REAL''


              ### å­—æ®µå®šä¹‰ä¸å¯¼å‡ºæ˜ å°„

              | å­—æ®µåç§° | å­—æ®µç±»å‹ | ä¸­æ–‡åˆ«å | æ˜¯å¦å¯¼å‡º | |----------|----------|----------|----------|
              | plan_id | BIGINT | è¡¥è´§è®¡åˆ’è¡ŒID | å¦ | | product_long_code | VARCHAR | SKUç¼–ç 
              | æ˜¯ | | supply_warehouse_code | VARCHAR | ä¾›è´§ä»“ | æ˜¯ | | expected_warehouse_code
              | VARCHAR | é¢„è®¡åˆ°è´§ä»“ç¼–ç  | å¦ | | expected_physical_warehouse | VARCHAR |
              ç‰©ç†ä»“ | æ˜¯ | | request_id | VARCHAR | è¯·æ±‚ID | å¦ | | plan_date | DATE | è®¡åˆ’æ—¥æœŸ
              | æ˜¯ | | plan_week | DATE | è®¡åˆ’å‘¨ | å¦ | | plan_week_start_date | DATE |
              è®¡åˆ’å‘¨å¼€å§‹ | å¦ | | plan_week_end_date | DATE | è®¡åˆ’å‘¨ç»“æŸ | å¦ | | arrival_date
              | DATE | é¢„è®¡åˆ°è´§æ—¥æœŸ | å¦ | | arrival_week | DATE | é¢„è®¡åˆ°è´§å‘¨ | å¦ | | arrival_week_start_date
              | DATE | é¢„è®¡åˆ°è´§å‘¨å¼€å§‹ | å¦ | | arrival_week_end_date | DATE | é¢„è®¡åˆ°è´§å‘¨ç»“æŸ | å¦
              | | order_qty | DECIMAL(12,2) | ç†è®ºç¼ºå£ | æ˜¯ | | order_qty_rounded | DECIMAL(12,2)
              | å»ºè®®è¡¥è´§é‡ | æ˜¯ | | pack_size | INTEGER | åŒ…è£…å€æ•° | æ˜¯ | | moq | INTEGER | æœ€å°èµ·è®¢é‡
              | æ˜¯ | | rounding_rule | VARCHAR(20) | å–æ•´è§„åˆ™ | å¦ | | order_upto_level
              | DECIMAL(12,2) | ç›®æ ‡åº“å­˜ | æ˜¯ | | rop | DECIMAL(12,2) | å†è®¢è´§ç‚¹ | æ˜¯ | | ss_pr
              | DECIMAL(12,2) | å®‰å…¨åº“å­˜ | æ˜¯ | | review_cycle_weeks | INTEGER | è¡¥è´§å‘¨æœŸ |
              æ˜¯ | | lead_time_weeks | INTEGER | æå‰æœŸå‘¨æ•° | æ˜¯ | | available_qty | DECIMAL(12,2)
              | å¯ç”¨åº“å­˜ | æ˜¯ | | in_transit_open_qty | DECIMAL(12,2) | åœ¨é€”æ•°é‡ | æ˜¯ | | stock_level_qty
              | DECIMAL(12,2) | åº“å­˜æ°´ä½ | æ˜¯ | | trigger_flag | BOOLEAN | æ˜¯å¦è§¦å‘ | æ˜¯ | |
              trigger_reason | VARCHAR | è§¦å‘åŸå›  | å¦ |


              ### DuckDBè¯­æ³•

              - æ—¥æœŸå¸¸é‡: DATE ''YYYY-MM-DD''

              - ç©ºå€¼å¤„ç†: COALESCE()

              - å…è®¸: COUNT(DISTINCT), çª—å£å‡½æ•°

              - ç¦æ­¢: NVL, DECODE, TO_CHARï¼ˆOracleæ–¹è¨€ï¼‰


              ## CoTï¼ˆæ€ç»´é“¾ - å†…éƒ¨æ‰§è¡Œï¼‰

              æ‰§è¡Œæ­¥éª¤ï¼š


              1. ç†è§£ç”¨æˆ·æŸ¥è¯¢æ„å›¾

              - è¯†åˆ«æŸ¥è¯¢ç±»å‹ï¼šæ±‡æ€»ç»Ÿè®¡ã€æ˜ç»†æŸ¥è¯¢ã€SKUåˆ†æç­‰

              - ç¡®å®šéœ€è¦çš„æ´å¯Ÿçš„æ•°æ®ç»´åº¦


              2. æ‹†è§£æŸ¥è¯¢æ­¥éª¤

              - æ ¹æ®ç”¨æˆ·éœ€æ±‚è§„åˆ’1-Nä¸ªæŸ¥è¯¢æ­¥éª¤

              - æ¯ä¸ªæ­¥éª¤æ˜ç¡®ç›®æ ‡å’Œè¿”å›å†…å®¹

              - è§„åˆ’ä¸­å¿…é¡»åŒ…å«æ˜ç»†å¯¼å‡ºæ­¥éª¤ï¼ˆé»˜è®¤è¦æ±‚ï¼‰


              3. æ‰§è¡ŒæŸ¥è¯¢

              - æŒ‰è§„åˆ’çš„æ­¥éª¤ä¾æ¬¡è°ƒç”¨duckdb_query

              - æœ€åä¸€æ­¥å¿…é¡»åŒ…å«CSVå¯¼å‡ºï¼ˆexport_oss=true, export_format=csv, presign_seconds=3600,
              limit=10000ï¼‰

              - è¿”å›æŸ¥è¯¢ç»“æœ


              4. æ€»ç»“è¾“å‡º

              - æ‰€æœ‰æŸ¥è¯¢å®Œæˆåï¼Œä½¿ç”¨Final Answeræ€»ç»“ï¼Œä»…è¾“å‡ºæœ€ç»ˆç­”æ¡ˆï¼Œç¦æ­¢è¾“å‡ºAction/Observation/Thought/å·¥å…·è°ƒç”¨è®°å½•/SQL/JSONç­‰ä¸­é—´è¿‡ç¨‹

              - Final Answerå¿…é¡»ä¸¥æ ¼æŒ‰ç…§Output Specä¸­çš„æ ¼å¼è¦æ±‚è¾“å‡ºï¼ŒåŒ…æ‹¬ï¼š
                * ä½¿ç”¨##å’Œ###æ ‡é¢˜å±‚çº§
                * è¯¦ç»†æ•°æ®é¢„è§ˆå¿…é¡»ä½¿ç”¨Markdownè¡¨æ ¼æ ¼å¼ï¼Œåˆ†éš”ç¬¦è¡Œæ ¼å¼ä¸ºï¼š| --- | --- | ---: | ---: | ---: | ---: | ---: |
                * æ•°å€¼åˆ—å¿…é¡»å³å¯¹é½ï¼ˆä½¿ç”¨---:ï¼‰ï¼Œæ–‡æœ¬åˆ—å·¦å¯¹é½ï¼ˆä½¿ç”¨---ï¼‰
                * æ•°å€¼å¿…é¡»ä½¿ç”¨åƒåˆ†ä½æ ¼å¼ï¼Œå°æ•°æœ€å¤š2ä½
                * æ‰€æœ‰æ•°é‡å¿…é¡»æ ‡æ³¨å•ä½PCS


              ## Output Specï¼ˆè¾“å‡ºè§„èŒƒï¼‰

              æ‰€æœ‰æŸ¥è¯¢å®Œæˆåï¼Œä½¿ç”¨Final Answerè¾“å‡ºç®€æ´çš„ç»“æœæ€»ç»“ï¼Œä»¥"## æŸ¥è¯¢ç»“æœæ€»ç»“"ä¸ºå¼€å¤´ï¼Œä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹ç»“æ„å’Œæ ¼å¼ï¼š

              ### å¿…é¡»è¾“å‡ºçš„ç»“æ„ï¼ˆä¸¥æ ¼æŒ‰é¡ºåºï¼‰ï¼š

              1. **## æŸ¥è¯¢ç»“æœæ€»ç»“**ï¼ˆäºŒçº§æ ‡é¢˜ï¼‰

              2. **### æŸ¥è¯¢èŒƒå›´**ï¼ˆä¸‰çº§æ ‡é¢˜ï¼‰
                 - æ ¼å¼ï¼šæ—¶é—´=YYYY-MM-DDï¼›SKU=xxxï¼›ä»“åº“=xxx

              3. **### æ•°æ®ç»Ÿè®¡æ‘˜è¦**ï¼ˆä¸‰çº§æ ‡é¢˜ï¼‰
                 - ä½¿ç”¨åˆ—è¡¨æ ¼å¼ï¼ˆ- å¼€å¤´ï¼‰
                 - åŒ…å«ï¼šæ€»å»ºè®®è¡¥è´§é‡ã€æ€»ç†è®ºç¼ºå£ã€è§¦å‘SKUæ•°ã€ä»“åº“æ•°é‡ç­‰
                 - æ‰€æœ‰æ•°é‡å¿…é¡»æ ‡æ³¨å•ä½PCS

              4. **### è¡¥è´§è®¡åˆ’ç»Ÿè®¡å›¾**ï¼ˆä¸‰çº§æ ‡é¢˜ï¼Œå¯é€‰ï¼‰
                 - ä»…å½“ä»“åº“æ•°é‡>1ä¸”æ€»å»ºè®®è¡¥è´§é‡>0æ—¶å±•ç¤º
                 - ä½¿ç”¨```vega-lite```ä»£ç å—åŒ…è£¹
                 - æ ‡é¢˜ä¸º"è¡¥è´§è®¡åˆ’ç»Ÿè®¡å›¾"

              5. **### è¯¦ç»†æ•°æ®é¢„è§ˆ**ï¼ˆä¸‰çº§æ ‡é¢˜ï¼‰
                 - **å¿…é¡»ä½¿ç”¨Markdownè¡¨æ ¼æ ¼å¼**
                 - è¡¨æ ¼æ ¼å¼è¦æ±‚ï¼š
                   * è¡¨å¤´ï¼š| SKUç¼–ç  | ç‰©ç†ä»“ | ç›®æ ‡åº“å­˜(PCS) | åº“å­˜æ°´ä½(PCS) | å†è®¢è´§ç‚¹(PCS) | ç†è®ºç¼ºå£(PCS) | å»ºè®®è¡¥è´§é‡(PCS) |
                   * åˆ†éš”ç¬¦ï¼š| --- | --- | ---: | ---: | ---: | ---: | ---: |
                   * å‰ä¸¤åˆ—ï¼ˆSKUç¼–ç ã€ç‰©ç†ä»“ï¼‰å·¦å¯¹é½ï¼Œåäº”åˆ—ï¼ˆæ•°å€¼åˆ—ï¼‰å³å¯¹é½
                   * æœ€å¤šå±•ç¤º10è¡Œæ•°æ®
                   * æ•°å€¼åˆ—å¿…é¡»ä½¿ç”¨åƒåˆ†ä½æ ¼å¼ï¼Œå°æ•°æœ€å¤š2ä½ï¼ˆå¦‚ï¼š3,400.00 æˆ– 3,400ï¼‰
                 - è¡¨æ ¼åæ·»åŠ ï¼š> å®Œæ•´å­—æ®µä¸å…¨éƒ¨æ˜ç»†è¯·ä¸‹è½½CSVã€‚

              6. **### å…³é”®æ´å¯Ÿ**ï¼ˆä¸‰çº§æ ‡é¢˜ï¼‰
                 - ä½¿ç”¨åˆ—è¡¨æ ¼å¼ï¼ˆ- å¼€å¤´ï¼‰
                 - è‡³å°‘3æ¡ï¼Œæœ€å¤š5æ¡
                 - å¿…é¡»è¦†ç›–ï¼šè´¡çŒ®åº¦ã€é£é™©ã€è¡ŒåŠ¨å»ºè®®

              7. **### æ•°æ®å¯¼å‡º**ï¼ˆä¸‰çº§æ ‡é¢˜ï¼‰
                 - CSVæ–‡ä»¶ï¼š[ä¸‹è½½è¡¥è´§è®¡åˆ’æ˜ç»†ï¼ˆCSVï¼‰](http_url)
                 - æœ‰æ•ˆæœŸï¼š1å°æ—¶
                 - æ•°æ®è¡Œæ•°ï¼šxxx

              ### æ ¼å¼è§„èŒƒï¼š

              - **è¡¨æ ¼æ ¼å¼**ï¼šå¿…é¡»ä¸¥æ ¼æŒ‰ç…§Markdownè¡¨æ ¼è¯­æ³•ï¼Œåˆ†éš”ç¬¦è¡Œå¿…é¡»æ­£ç¡®ï¼Œæ¯åˆ—å¯¹é½æ–¹å¼å¿…é¡»æ˜ç¡®
              - **æ•°å­—æ ¼å¼**ï¼šæ•°é‡ä½¿ç”¨åƒåˆ†ä½ï¼Œå°æ•°æœ€å¤š2ä½ï¼›ç™¾åˆ†æ¯”ä¿ç•™1ä½å°æ•°ï¼›ç»Ÿä¸€å•ä½PCS
              - **æ ‡é¢˜å±‚çº§**ï¼šä½¿ç”¨##ï¼ˆäºŒçº§ï¼‰å’Œ###ï¼ˆä¸‰çº§ï¼‰æ ‡é¢˜ï¼Œä¸¥æ ¼æŒ‰ç…§ç¤ºä¾‹æ ¼å¼
              - **ç¦æ­¢**ï¼šä¸å¾—è¾“å‡ºä¸­é—´æ¨ç†ã€Action/Observation/Thoughtã€å·¥å…·è°ƒç”¨è®°å½•ã€SQLã€JSONç­‰


              ## Few-Shotï¼ˆç¤ºä¾‹ï¼‰

              ### ç¤ºä¾‹1ï¼šæ±‡æ€»ç»Ÿè®¡æŸ¥è¯¢

              ç”¨æˆ·æŸ¥è¯¢ï¼š2025å¹´6æœˆ30æ—¥çš„è¡¥è´§è®¡åˆ’æ•´ä½“æƒ…å†µ

              è¾“å…¥ï¼š{"time_window":"2025-06-30", "query":"2025å¹´6æœˆ30æ—¥çš„è¡¥è´§è®¡åˆ’æ•´ä½“æƒ…å†µ"}


              æ­¥éª¤æ‹†è§£ï¼š

              - ç”¨æˆ·éœ€è¦æ•´ä½“ç»Ÿè®¡ â†’ éœ€è¦å…¨å±€æ±‡æ€»ã€ä»“åº“ç»´åº¦æ±‡æ€»æ•°æ®åŠæ˜ç»†æ•°æ®

              - éœ€è¦å¯¼å‡ºæ˜ç»†ä¾›è¿›ä¸€æ­¥åˆ†æ


              æ‰§è¡Œæ­¥éª¤ï¼š

              æ­¥éª¤1:è°ƒç”¨duckdb_queryå·¥å…·ï¼ŒæŸ¥è¯¢å…¨å±€æ±‡æ€»æ•°æ®




              æ­¥éª¤2:è°ƒç”¨duckdb_queryå·¥å…·ï¼ŒæŸ¥è¯¢ä»“åº“ç»´åº¦æ±‡æ€»æ•°æ®




              æ­¥éª¤3:è°ƒç”¨duckdb_queryå·¥å…·ï¼ŒæŸ¥è¯¢å»ºè®®è¡¥è´§é‡å‰10çš„æ˜ç»†æ•°æ®

              æ­¥éª¤4ï¼šè°ƒç”¨duckdb_queryå·¥å…·ï¼Œå¯¼å‡ºæŸ¥è¯¢èŒƒå›´å†…çš„æ˜ç»†æ•°æ® - å·¥å…·å‚æ•°: export_oss=true, export_format=csv,
              presign_seconds=3600, limit=10000

              æ­¥éª¤5ï¼šæ€»ç»“è¾“å‡ºFinal Answerï¼ˆæŸ¥è¯¢èŒƒå›´ã€æ•°æ®ç»Ÿè®¡æ‘˜è¦ã€æ˜ç»†é¢„è§ˆã€CSVä¸‹è½½é“¾æ¥ï¼‰

              æœ€ç»ˆè¾“å‡ºç¤ºä¾‹ï¼ˆFinal Answerï¼‰ï¼š

              ## æŸ¥è¯¢ç»“æœæ€»ç»“

              ### æŸ¥è¯¢èŒƒå›´
              æ—¶é—´=2025-06-30ï¼›SKU=ALLï¼›ä»“åº“=ALL

              ### æ•°æ®ç»Ÿè®¡æ‘˜è¦
              - æ€»å»ºè®®è¡¥è´§é‡ï¼š45,600 PCS
              - æ€»ç†è®ºç¼ºå£ï¼š44,000 PCS
              - è§¦å‘SKUæ•°ï¼š1,230
              - ä»“åº“æ•°é‡ï¼š12

              ### è¡¥è´§è®¡åˆ’ç»Ÿè®¡å›¾
              ```vega-lite { "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
              "title": "è¡¥è´§è®¡åˆ’ç»Ÿè®¡å›¾", "data": {"values": [ {"warehouse": "åŒ—äº¬ä»“", "suggested":
              12300}, {"warehouse": "æˆéƒ½ä»“", "suggested": 9800}, {"warehouse": "æ˜†å±±ä»“",
              "suggested": 8600} ]}, "mark": "bar", "encoding": { "x": {"field": "warehouse",
              "type": "nominal", "title": "ä»“åº“"}, "y": {"field": "suggested", "type":
              "quantitative", "title": "å»ºè®®è¡¥è´§é‡ï¼ˆPCSï¼‰"} } } ```

              ### è¯¦ç»†æ•°æ®é¢„è§ˆ

              | SKUç¼–ç  | ç‰©ç†ä»“ | ç›®æ ‡åº“å­˜(PCS) | åº“å­˜æ°´ä½(PCS) | å†è®¢è´§ç‚¹(PCS) | ç†è®ºç¼ºå£(PCS) | å»ºè®®è¡¥è´§é‡(PCS) |
              | --- | --- | ---: | ---: | ---: | ---: | ---: |
              | A.A.001... | åŒ—äº¬ä»“ | 3,400.00 | 6,240.00 | 2,004.16 | 0.00 | 0 |
              | ... | ... | ... | ... | ... | ... | ... |
              > å®Œæ•´å­—æ®µä¸å…¨éƒ¨æ˜ç»†è¯·ä¸‹è½½CSVã€‚

              ### å…³é”®æ´å¯Ÿ
              - Top3ä»“è´¡çŒ®å æ¯”çº¦58%ï¼Œé›†ä¸­äºååŒ—ä¸è¥¿å—åŒºåŸŸã€‚
              - ä½åº“å­˜é£é™©ï¼š5ä¸ªä»“ä½äºROPï¼›è¿‡é‡é£é™©ï¼š2ä¸ªä»“å¯ç”¨åº“å­˜é«˜äºç›®æ ‡åº“å­˜ã€‚
              - è¡ŒåŠ¨å»ºè®®ï¼šä¼˜å…ˆè¡¥æˆéƒ½ä»“ä¸æ˜†å±±ä»“ï¼›è¯„ä¼°åŒ—äº¬ä»“æ˜¯å¦è½¬ç§»å¯Œä½™åº“å­˜ã€‚

              ### æ•°æ®å¯¼å‡º
              CSVæ–‡ä»¶ï¼š[ä¸‹è½½è¡¥è´§è®¡åˆ’æ˜ç»†ï¼ˆCSVï¼‰](http://example.com/http_url)
              æœ‰æ•ˆæœŸï¼š1å°æ—¶
              æ•°æ®è¡Œæ•°ï¼š12


              ### ç¤ºä¾‹2ï¼šç‰¹å®šSKUå’Œä»“åº“æŸ¥è¯¢

              ç”¨æˆ·æŸ¥è¯¢ï¼šæŸ¥è¯¢A.A.001.AA0010021åœ¨åŒ—äº¬ä»“2025å¹´6æœˆ30æ—¥çš„è¡¥è´§æƒ…å†µ

              è¾“å…¥ï¼š{"time_window":"2025-06-30", "query":"æŸ¥è¯¢A.A.001.AA0010021åœ¨åŒ—äº¬ä»“2025å¹´6æœˆ30æ—¥çš„è¡¥è´§æƒ…å†µ"}


              æ­¥éª¤æ‹†è§£ï¼š

              - ç”¨æˆ·å…³æ³¨ç‰¹å®šSKUå’Œä»“åº“ â†’ éœ€è¦è¯¥SKUåœ¨è¯¥ä»“åº“çš„è¯¦ç»†æ•°æ®

              - æ•°æ®é‡å°ï¼Œå¯ä»¥ä¸€æ­¥å®ŒæˆæŸ¥è¯¢å’Œå¯¼å‡º


              æ‰§è¡Œæ­¥éª¤ï¼š

              æ­¥éª¤1:è°ƒç”¨duckdb_queryå·¥å…·ï¼ŒæŸ¥è¯¢æŸ¥è¯¢èŒƒå›´å†…çš„æ˜ç»†æ•°æ® æ­¥éª¤2ï¼šè°ƒç”¨duckdb_queryå·¥å…·ï¼Œå¯¼å‡ºæŸ¥è¯¢èŒƒå›´å†…çš„æ˜ç»†æ•°æ®
              - å·¥å…·å‚æ•°: export_oss=true, export_format=csv, presign_seconds=3600, limit=10000
              æ­¥éª¤3ï¼šæ€»ç»“è¾“å‡ºFinal Answerï¼ˆæŸ¥è¯¢èŒƒå›´ã€æ•°æ®ç»Ÿè®¡æ‘˜è¦ã€æ˜ç»†é¢„è§ˆã€CSVä¸‹è½½é“¾æ¥ï¼‰

              æœ€ç»ˆè¾“å‡ºç¤ºä¾‹ï¼ˆFinal Answerï¼‰ï¼š

              ## æŸ¥è¯¢ç»“æœæ€»ç»“

              ### æŸ¥è¯¢èŒƒå›´
              æ—¶é—´=2025-06-30ï¼›SKU=A.A.001.AA0010021ï¼›ä»“åº“=åŒ—äº¬ä»“

              ### æ•°æ®ç»Ÿè®¡æ‘˜è¦
              - æ€»å»ºè®®è¡¥è´§é‡ï¼š0 PCS
              - æ€»ç†è®ºç¼ºå£ï¼š0 PCS
              - è§¦å‘SKUæ•°ï¼š1
              - ä»“åº“æ•°é‡ï¼š1

              ### è¯¦ç»†æ•°æ®é¢„è§ˆ

              | SKUç¼–ç  | ç‰©ç†ä»“ | ç›®æ ‡åº“å­˜(PCS) | åº“å­˜æ°´ä½(PCS) | å†è®¢è´§ç‚¹(PCS) | ç†è®ºç¼ºå£(PCS) | å»ºè®®è¡¥è´§é‡(PCS) |
              | --- | --- | ---: | ---: | ---: | ---: | ---: |
              | A.A.001.AA0010021 | åŒ—äº¬ä»“ | 3,397.84 | 6,240.00 | 2,004.16 | 0.00 | 0 |

              ### å…³é”®æ´å¯Ÿ
              - åŒ—äº¬ä»“åº“å­˜æ°´ä½é«˜äºç›®æ ‡åº“å­˜ï¼Œæ— éœ€è¡¥è´§ã€‚

              ### æ•°æ®å¯¼å‡º
              CSVæ–‡ä»¶ï¼š[ä¸‹è½½è¡¥è´§è®¡åˆ’æ˜ç»†ï¼ˆCSVï¼‰](http://example.com/http_url)
              æœ‰æ•ˆæœŸï¼š1å°æ—¶
              æ•°æ®è¡Œæ•°ï¼š12


              ### ç¤ºä¾‹3ï¼šTop SKUåˆ†æ

              ç”¨æˆ·æŸ¥è¯¢ï¼šæŸ¥è¯¢2025å¹´6æœˆ30æ—¥è¡¥è´§é‡æœ€å¤§çš„å‰10ä¸ªSKU

              è¾“å…¥ï¼š{"time_window":"2025-06-30", "query":"æŸ¥è¯¢2025å¹´6æœˆ30æ—¥è¡¥è´§é‡æœ€å¤§çš„å‰10ä¸ªSKU"}


              æ­¥éª¤æ‹†è§£ï¼š

              - ç”¨æˆ·éœ€è¦Top SKUæ’å â†’ æŒ‰SKUèšåˆå¹¶æ’åº

              - éœ€è¦å¯¼å‡ºè¿™äº›Top SKUçš„æ˜ç»†æ•°æ®


              æ‰§è¡Œæ­¥éª¤ï¼š

              æ­¥éª¤1:è°ƒç”¨duckdb_queryå·¥å…·ï¼ŒæŸ¥è¯¢å»ºè®®è¡¥è´§é‡å‰10çš„æ˜ç»†æ•°æ®




              æ­¥éª¤2:è°ƒç”¨duckdb_queryå·¥å…·ï¼Œå¯¼å‡ºæŸ¥è¯¢èŒƒå›´å†…çš„æ˜ç»†æ•°æ® - å·¥å…·å‚æ•°: export_oss=true, export_format=csv,
              presign_seconds=3600, limit=10000 æ­¥éª¤3ï¼šæ€»ç»“è¾“å‡ºFinal Answerï¼ˆæŸ¥è¯¢èŒƒå›´ã€æ•°æ®ç»Ÿè®¡æ‘˜è¦ã€æ˜ç»†é¢„è§ˆã€CSVä¸‹è½½é“¾æ¥ï¼‰

              æœ€ç»ˆè¾“å‡ºç¤ºä¾‹ï¼ˆFinal Answerï¼‰ï¼š

              ## æŸ¥è¯¢ç»“æœæ€»ç»“

              ### æŸ¥è¯¢èŒƒå›´
              æ—¶é—´=2025-06-30ï¼›SKU=Top10ï¼›ä»“åº“=å…¨éƒ¨

              ### æ•°æ®ç»Ÿè®¡æ‘˜è¦
              - æ€»å»ºè®®è¡¥è´§é‡ï¼š26,500 PCS
              - æ€»ç†è®ºç¼ºå£ï¼š25,000 PCS
              - è§¦å‘SKUæ•°ï¼š10
              - ä»“åº“æ•°é‡ï¼š12

              ### è¯¦ç»†æ•°æ®é¢„è§ˆ

              | SKUç¼–ç  | ç‰©ç†ä»“ | ç›®æ ‡åº“å­˜(PCS) | åº“å­˜æ°´ä½(PCS) | å†è®¢è´§ç‚¹(PCS) | ç†è®ºç¼ºå£(PCS) | å»ºè®®è¡¥è´§é‡(PCS) |
              | --- | --- | ---: | ---: | ---: | ---: | ---: |
              | A... | åŒ—äº¬ä»“ | 10,000.00 | 3,500.00 | 6,000.00 | 6,500.00 | 6,500 |
              | ... | ... | ... | ... | ... | ... | ... |
              > å®Œæ•´å­—æ®µä¸å…¨éƒ¨æ˜ç»†è¯·ä¸‹è½½CSVã€‚

              ### å…³é”®æ´å¯Ÿ
              - Top10 SKUè´¡çŒ®çº¦40%çš„å»ºè®®è¡¥è´§é‡ï¼Œé›†ä¸­åœ¨XXå“ç±»ã€‚
              - é«˜é£é™©ä»“ï¼š2ä¸ªä»“ä½äºROPï¼Œä¼˜å…ˆè¡¥è´§ï¼›1ä¸ªä»“å¯ç”¨åº“å­˜é«˜äºç›®æ ‡åº“å­˜ï¼Œé¿å…è¿‡è¡¥ã€‚
              - è¡ŒåŠ¨å»ºè®®ï¼šé’ˆå¯¹Top3 SKUæå‰é”å®šäº§èƒ½ä¸è¿è¾“ä»“ä½ã€‚

              ### æ•°æ®å¯¼å‡º
              CSVæ–‡ä»¶ï¼š[ä¸‹è½½è¡¥è´§è®¡åˆ’æ˜ç»†ï¼ˆCSVï¼‰](http://example.com/http_url)
              æœ‰æ•ˆæœŸï¼š1å°æ—¶
              æ•°æ®è¡Œæ•°ï¼š12

              '
          maximum_iterations:
            type: constant
            value: 5
          model:
            type: constant
            value:
              completion_params: {}
              mode: chat
              model: deepseek-chat
              model_type: llm
              provider: langgenius/deepseek/deepseek
              type: model-selector
          query:
            type: constant
            value: "{\n  \"time_window\": \"{{#1761221121698.time_window#}}\",\n \
              \ \"query\": \"{{#1761221121698.query#}}\"\n}"
          tools:
            type: constant
            value:
            - enabled: true
              extra:
                description: æ‰§è¡Œ DuckDB æŸ¥è¯¢ï¼Œè¿”å› JSON ç»“æœï¼›å¯é€‰å¯¼å‡ºåˆ° OSSã€‚å‚æ•°ï¼šsql(SQL æ–‡æœ¬)ï¼Œdb_path(å¯é€‰)ï¼Œlimit(å¯é€‰è¡Œæ•°é™åˆ¶)ï¼Œexport_oss(æ˜¯å¦å¯¼å‡ºï¼Œé»˜è®¤
                  false)ï¼Œexport_format(å¯¼å‡ºæ ¼å¼ï¼Œé»˜è®¤ csv)ï¼Œexport_filename(å¯¼å‡ºæ–‡ä»¶å)ï¼Œpresign_seconds(URL
                  æœ‰æ•ˆæœŸï¼Œé»˜è®¤ 3600)ã€‚è¿”å›å€¼ï¼š{db, columns, rows, rowcount, duration_ms, export}ã€‚
              parameters:
                db_path:
                  auto: 1
                  value: null
                export_filename:
                  auto: 1
                  value: null
                export_format:
                  auto: 1
                  value: null
                export_oss:
                  auto: 1
                  value: null
                limit:
                  auto: 1
                  value: null
                presign_seconds:
                  auto: 1
                  value: null
                sql:
                  auto: 1
                  value: null
              provider_name: orchestrax-mcp
              provider_show_name: AIè°ƒæ‹¨MCP
              schemas:
              - auto_generate: null
                default: null
                form: llm
                human_description:
                  en_US: ''
                  ja_JP: ''
                  pt_BR: ''
                  zh_Hans: ''
                label:
                  en_US: sql
                  ja_JP: sql
                  pt_BR: sql
                  zh_Hans: sql
                llm_description: ''
                max: null
                min: null
                name: sql
                options: []
                placeholder: null
                precision: null
                required: true
                scope: null
                template: null
                type: string
              - auto_generate: null
                default: null
                form: llm
                human_description:
                  en_US: ''
                  ja_JP: ''
                  pt_BR: ''
                  zh_Hans: ''
                label:
                  en_US: db_path
                  ja_JP: db_path
                  pt_BR: db_path
                  zh_Hans: db_path
                llm_description: ''
                max: null
                min: null
                name: db_path
                options: []
                placeholder: null
                precision: null
                required: false
                scope: null
                template: null
                type: string
              - auto_generate: null
                default: null
                form: llm
                human_description:
                  zh_Hans: ''
                label:
                  en_US: limit
                  ja_JP: limit
                  pt_BR: limit
                  zh_Hans: limit
                llm_description: ''
                max: null
                min: null
                name: limit
                options: []
                placeholder: null
                precision: null
                required: false
                scope: null
                template: null
                type: string
              - auto_generate: null
                default: null
                form: llm
                human_description:
                  zh_Hans: ''
                label:
                  en_US: export_oss
                  ja_JP: export_oss
                  pt_BR: export_oss
                  zh_Hans: export_oss
                llm_description: ''
                max: null
                min: null
                name: export_oss
                options: []
                placeholder: null
                precision: null
                required: false
                scope: null
                template: null
                type: boolean
              - auto_generate: null
                default: null
                form: llm
                human_description:
                  zh_Hans: ''
                label:
                  en_US: export_format
                  ja_JP: export_format
                  pt_BR: export_format
                  zh_Hans: export_format
                llm_description: ''
                max: null
                min: null
                name: export_format
                options: []
                placeholder: null
                precision: null
                required: false
                scope: null
                template: null
                type: string
              - auto_generate: null
                default: null
                form: llm
                human_description:
                  zh_Hans: ''
                label:
                  en_US: export_filename
                  ja_JP: export_filename
                  pt_BR: export_filename
                  zh_Hans: export_filename
                llm_description: ''
                max: null
                min: null
                name: export_filename
                options: []
                placeholder: null
                precision: null
                required: false
                scope: null
                template: null
                type: string
              - auto_generate: null
                default: 3600
                form: llm
                human_description:
                  zh_Hans: ''
                label:
                  en_US: presign_seconds
                  ja_JP: presign_seconds
                  pt_BR: presign_seconds
                  zh_Hans: presign_seconds
                llm_description: ''
                max: null
                min: null
                name: presign_seconds
                options: []
                placeholder: null
                precision: null
                required: false
                scope: null
                template: null
                type: number
              settings: {}
              tool_description: æ‰§è¡Œ DuckDB æŸ¥è¯¢ï¼Œè¿”å› JSON ç»“æœï¼›å¯é€‰å¯¼å‡ºåˆ° OSSã€‚
              tool_label: duckdb_query
              tool_name: duckdb_query
              type: mcp
        agent_strategy_label: ReAct
        agent_strategy_name: ReAct
        agent_strategy_provider_name: langgenius/agent/agent
        desc: ''
        meta:
          minimum_dify_version: null
          version: 0.0.2
        output_schema: null
        plugin_unique_identifier: langgenius/agent:0.0.20@eafd74ef989a085162e2de35b8b3ada3aab65430eefb10c966399d02327cd679
        selected: false
        title: Agent
        type: agent
        version: '2'
      height: 196
      id: '1761221127988'
      position:
        x: 384
        y: 282
      positionAbsolute:
        x: 384
        y: 282
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1761221127988'
          - text
          value_type: string
          variable: result
        selected: false
        title: ç»“æŸ
        type: end
      height: 88
      id: '1761221135331'
      position:
        x: 992
        y: 282
      positionAbsolute:
        x: 992
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    viewport:
      x: -14.719963427094171
      y: 76.49082832234257
      zoom: 0.8236477658823846
  rag_pipeline_variables: []
